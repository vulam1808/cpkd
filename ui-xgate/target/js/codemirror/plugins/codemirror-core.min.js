window.CodeMirror=function(){function q(a,b){if(!(this instanceof q))return new q(a,b);this.options=b=b||{};for(var c in Zb)if(!b.hasOwnProperty(c)&&Zb.hasOwnProperty(c))b[c]=Zb[c];$b(b);c=this.display=ae(a,typeof b.value=="string"?0:b.value.first);c.wrapper.CodeMirror=this;Uc(this);b.autofocus&&!ac&&U(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:false,focused:false,suppressEdits:false,pasteIncoming:false,draggingText:false,highlight:new bc};Vc(this);if(b.lineWrapping)this.display.wrapper.className+=
" CodeMirror-wrap";var d=b.value;if(typeof d=="string")d=new Q(b.value,b.mode);A(this,Wc)(this,d);J&&setTimeout(Z(ma,this,true),20);be(this);var e;try{e=document.activeElement==c.input}catch(f){}e||b.autofocus&&!ac?setTimeout(Z(ra,this),20):cc(this);A(this,function(){for(var g in za)za.propertyIsEnumerable(g)&&za[g](this,b[g],Xc);for(g=0;g<dc.length;++g)dc[g](this)})()}function ae(a,b){var c={},d=c.input=v("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none; font-size: 4px;");
if(V)d.style.width="1000px";else d.setAttribute("wrap","off");if(Sa)d.style.border="1px solid black";d.setAttribute("autocorrect","off");d.setAttribute("autocapitalize","off");d.setAttribute("spellcheck","false");c.inputDiv=v("div",[d],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");c.scrollbarH=v("div",[v("div",null,null,"height: 1px")],"CodeMirror-hscrollbar");c.scrollbarV=v("div",[v("div",null,null,"width: 1px")],"CodeMirror-vscrollbar");c.scrollbarFiller=v("div",null,"CodeMirror-scrollbar-filler");
c.gutterFiller=v("div",null,"CodeMirror-gutter-filler");c.lineDiv=v("div",null,"CodeMirror-code");c.selectionDiv=v("div",null,null,"position: relative; z-index: 1");c.cursor=v("div","\u00a0","CodeMirror-cursor");c.otherCursor=v("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor");c.measure=v("div",null,"CodeMirror-measure");c.lineSpace=v("div",[c.measure,c.selectionDiv,c.lineDiv,c.cursor,c.otherCursor],null,"position: relative; outline: none");c.mover=v("div",[v("div",[c.lineSpace],"CodeMirror-lines")],
null,"position: relative");c.sizer=v("div",[c.mover],"CodeMirror-sizer");c.heightForcer=v("div",null,null,"position: absolute; height: "+Aa+"px; width: 1px;");c.gutters=v("div",null,"CodeMirror-gutters");c.lineGutter=null;c.scroller=v("div",[c.sizer,c.heightForcer,c.gutters],"CodeMirror-scroll");c.scroller.setAttribute("tabIndex","-1");c.wrapper=v("div",[c.inputDiv,c.scrollbarH,c.scrollbarV,c.scrollbarFiller,c.gutterFiller,c.scroller],"CodeMirror");if(Ba){c.gutters.style.zIndex=-1;c.scroller.style.paddingRight=
0}a.appendChild?a.appendChild(c.wrapper):a(c.wrapper);if(Sa)d.style.width="0px";if(!V)c.scroller.draggable=true;if(ec){c.inputDiv.style.height="1px";c.inputDiv.style.position="absolute"}else if(Ba)c.scrollbarH.style.minWidth=c.scrollbarV.style.minWidth="18px";c.viewOffset=c.lastSizeC=0;c.showingFrom=c.showingTo=b;c.lineNumWidth=c.lineNumInnerWidth=c.lineNumChars=null;c.prevInput="";c.alignWidgets=false;c.pollingFast=false;c.poll=new bc;c.cachedCharWidth=c.cachedTextHeight=null;c.measureLineCache=
[];c.measureLineCachePos=0;c.inaccurateSelection=false;c.maxLine=null;c.maxLineLength=0;c.maxLineChanged=false;c.wheelDX=c.wheelDY=c.wheelStartX=c.wheelStartY=null;return c}function Ta(a){a.doc.mode=q.getMode(a.options,a.doc.modeOption);a.doc.iter(function(b){if(b.stateAfter)b.stateAfter=null;if(b.styles)b.styles=null});a.doc.frontier=a.doc.first;Ua(a,100);a.state.modeGen++;a.curOp&&L(a)}function Yc(a){var b=Ca(a.display),c=a.options.lineWrapping,d=c&&Math.max(5,a.display.scroller.clientWidth/Zc(a.display)-
3);return function(e){return sa(a.doc,e)?0:c?(Math.ceil(e.text.length/d)||1)*b:b}}function $c(a){var b=a.doc,c=Yc(a);b.iter(function(d){var e=c(d);e!=d.height&&$(d,e)})}function ad(a){var b=ha[a.options.keyMap],c=b.style;a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(c?" cm-keymap-"+c:"");a.state.disableInput=b.disableInput}function Vc(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g,
" cm-s-");Da(a)}function Va(a){Uc(a);L(a);setTimeout(function(){fc(a)},20)}function Uc(a){var b=a.display.gutters,c=a.options.gutters;ub(b);for(var d=0;d<c.length;++d){var e=c[d],f=b.appendChild(v("div",null,"CodeMirror-gutter "+e));if(e=="CodeMirror-linenumbers"){a.display.lineGutter=f;f.style.width=(a.display.lineNumWidth||1)+"px"}}b.style.display=d?"":"none"}function vb(a,b){if(b.height==0)return 0;for(var c=b.text.length,d,e=b;d=Ea(e,-1);){d=d.find();e=x(a,d.from.line);c+=d.from.ch-d.to.ch}for(e=
b;d=wb(e);){d=d.find();c-=e.text.length-d.from.ch;e=x(a,d.to.line);c+=e.text.length-d.to.ch}return c}function gc(a){var b=a.display,c=a.doc;b.maxLine=x(c,c.first);b.maxLineLength=vb(c,b.maxLine);b.maxLineChanged=true;c.iter(function(d){var e=vb(c,d);if(e>b.maxLineLength){b.maxLineLength=e;b.maxLine=d}})}function $b(a){for(var b=false,c=0;c<a.gutters.length;++c)if(a.gutters[c]=="CodeMirror-linenumbers")if(a.lineNumbers)b=true;else a.gutters.splice(c--,1);!b&&a.lineNumbers&&a.gutters.push("CodeMirror-linenumbers")}
function hc(a){var b=a.display,c=a.doc.height+(b.mover.offsetHeight-b.lineSpace.offsetHeight);b.sizer.style.minHeight=b.heightForcer.style.top=c+"px";b.gutters.style.height=Math.max(c,b.scroller.clientHeight-Aa)+"px";c=Math.max(c,b.scroller.scrollHeight);var d=b.scroller.scrollWidth>b.scroller.clientWidth+1,e=c>b.scroller.clientHeight+1;if(e){b.scrollbarV.style.display="block";b.scrollbarV.style.bottom=d?Wa(b.measure)+"px":"0";b.scrollbarV.firstChild.style.height=c-b.scroller.clientHeight+b.scrollbarV.clientHeight+
"px"}else b.scrollbarV.style.display="";if(d){b.scrollbarH.style.display="block";b.scrollbarH.style.right=e?Wa(b.measure)+"px":"0";b.scrollbarH.firstChild.style.width=b.scroller.scrollWidth-b.scroller.clientWidth+b.scrollbarH.clientWidth+"px"}else b.scrollbarH.style.display="";if(d&&e){b.scrollbarFiller.style.display="block";b.scrollbarFiller.style.height=b.scrollbarFiller.style.width=Wa(b.measure)+"px"}else b.scrollbarFiller.style.display="";if(d&&a.options.coverGutterNextToScrollbar&&a.options.fixedGutter){b.gutterFiller.style.display=
"block";b.gutterFiller.style.height=Wa(b.measure)+"px";b.gutterFiller.style.width=b.gutters.offsetWidth+"px"}else b.gutterFiller.style.display="";if(ce&&Wa(b.measure)===0)b.scrollbarV.style.minWidth=b.scrollbarH.style.minHeight=de?"18px":"12px"}function ic(a,b,c){var d=a.scroller.scrollTop,e=a.wrapper.clientHeight;if(typeof c=="number")d=c;else if(c){d=c.top;e=c.bottom-c.top}d=Math.floor(d-a.lineSpace.offsetTop);a=Math.ceil(d+e);return{from:Xa(b,d),to:Xa(b,a)}}function fc(a){var b=a.display;if(!(!b.alignWidgets&&
(!b.gutters.firstChild||!a.options.fixedGutter))){for(var c=jc(b)-b.scroller.scrollLeft+a.doc.scrollLeft,d=b.gutters.offsetWidth,e=c+"px",f=b.lineDiv.firstChild;f;f=f.nextSibling)if(f.alignable)for(var g=0,i=f.alignable;g<i.length;++g)i[g].style.left=e;if(a.options.fixedGutter)b.gutters.style.left=c+d+"px"}}function ee(a){if(!a.options.lineNumbers)return false;var b=a.doc;b=String(a.options.lineNumberFormatter(b.first+b.size-1+a.options.firstLineNumber));a=a.display;if(b.length!=a.lineNumChars){var c=
a.measure.appendChild(v("div",[v("div",b)],"CodeMirror-linenumber CodeMirror-gutter-elt")),d=c.firstChild.offsetWidth;c=c.offsetWidth-d;a.lineGutter.style.width="";a.lineNumInnerWidth=Math.max(d,a.lineGutter.offsetWidth-c);a.lineNumWidth=a.lineNumInnerWidth+c;a.lineNumChars=a.lineNumInnerWidth?b.length:-1;a.lineGutter.style.width=a.lineNumWidth+"px";return true}return false}function jc(a){return I(a.scroller).left-I(a.sizer).left}function xb(a,b,c,d){for(var e=a.display.showingFrom,f=a.display.showingTo,
g,i=ic(a.display,a.doc,c);;){if(!fe(a,b,i,d))break;d=false;g=true;kc(a);hc(a);if(c)c=Math.min(a.display.scroller.scrollHeight-a.display.scroller.clientHeight,typeof c=="number"?c:c.top);i=ic(a.display,a.doc,c);if(i.from>=a.display.showingFrom&&i.to<=a.display.showingTo)break;b=[]}if(g){T(a,"update",a);if(a.display.showingFrom!=e||a.display.showingTo!=f)T(a,"viewportChange",a,a.display.showingFrom,a.display.showingTo)}return g}function fe(a,b,c,d){var e=a.display,f=a.doc;if(e.wrapper.clientWidth){if(!(!d&&
b.length==0&&c.from>e.showingFrom&&c.to<e.showingTo)){if(ee(a))b=[{from:f.first,to:f.first+f.size}];var g=e.sizer.style.marginLeft=e.gutters.offsetWidth+"px";e.scrollbarH.style.left=a.options.fixedGutter?g:"0";g=Infinity;if(a.options.lineNumbers)for(var i=0;i<b.length;++i)if(b[i].diff){g=b[i].from;break}i=f.first+f.size;var h=Math.max(c.from-a.options.viewportMargin,f.first);c=Math.min(i,c.to+a.options.viewportMargin);if(e.showingFrom<h&&h-e.showingFrom<20)h=Math.max(f.first,e.showingFrom);if(e.showingTo>
c&&e.showingTo-c<20)c=Math.min(i,e.showingTo);if(Ya)for(h=W(ia(f,x(f,h)));c<i&&sa(f,x(f,c));)++c;var j=[{from:Math.max(e.showingFrom,f.first),to:Math.min(e.showingTo,i)}];j=j[0].from>=j[0].to?[]:ge(j,b);if(Ya)for(i=0;i<j.length;++i){b=j[i];for(var k;k=wb(x(f,b.to-1));){k=k.find().from.line;if(k>b.from)b.to=k;else{j.splice(i--,1);break}}}for(i=f=0;i<j.length;++i){b=j[i];if(b.from<h)b.from=h;if(b.to>c)b.to=c;if(b.from>=b.to)j.splice(i--,1);else f+=b.to-b.from}if(!d&&f==c-h&&h==e.showingFrom&&c==e.showingTo)bd(a);
else{j.sort(function(m,t){return m.from-t.from});try{var l=document.activeElement}catch(n){}if(f<(c-h)*0.7)e.lineDiv.style.display="none";he(a,h,c,j,g);e.lineDiv.style.display="";l&&document.activeElement!=l&&l.offsetHeight&&l.focus();if(h!=e.showingFrom||c!=e.showingTo||e.lastSizeC!=e.wrapper.clientHeight){e.lastSizeC=e.wrapper.clientHeight;Ua(a,400)}e.showingFrom=h;e.showingTo=c;ie(a);bd(a);return true}}}else{e.showingFrom=e.showingTo=f.first;e.viewOffset=0}}function ie(a){a=a.display;for(var b=
a.lineDiv.offsetTop,c=a.lineDiv.firstChild,d;c;c=c.nextSibling)if(c.lineObj){if(Ba){var e=c.offsetTop+c.offsetHeight;d=e-b;b=e}else{d=I(c);d=d.bottom-d.top}e=c.lineObj.height-d;if(d<2)d=Ca(a);if(e>0.001||e<-0.001){$(c.lineObj,d);if(d=c.lineObj.widgets)for(e=0;e<d.length;++e)d[e].height=d[e].node.offsetHeight}}}function bd(a){var b=a.display.viewOffset=Za(a,x(a.doc,a.display.showingFrom));a.display.mover.style.top=b+"px"}function ge(a,b){for(var c=0,d=b.length||0;c<d;++c){for(var e=b[c],f=[],g=e.diff||
0,i=0,h=a.length;i<h;++i){var j=a[i];if(e.to<=j.from&&e.diff)f.push({from:j.from+g,to:j.to+g});else if(e.to<=j.from||e.from>=j.to)f.push(j);else{e.from>j.from&&f.push({from:j.from,to:e.from});e.to<j.to&&f.push({from:e.to+g,to:j.to+g})}}a=f}return a}function je(a){for(var b=a.display,c={},d={},e=b.gutters.firstChild,f=0;e;e=e.nextSibling,++f){c[a.options.gutters[f]]=e.offsetLeft;d[a.options.gutters[f]]=e.offsetWidth}return{fixedPos:jc(b),gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:c,gutterWidth:d,
wrapperWidth:b.wrapper.clientWidth}}function he(a,b,c,d,e){function f(m){var t=m.nextSibling;if(V&&Fa&&a.display.currentWheelTarget==m){m.style.display="none";m.lineObj=null}else m.parentNode.removeChild(m);return t}var g=je(a),i=a.display,h=a.options.lineNumbers;if(!d.length&&(!V||!a.display.currentWheelTarget))ub(i.lineDiv);var j=i.lineDiv,k=j.firstChild,l=d.shift(),n=b;for(a.doc.iter(b,c,function(m){if(l&&l.to==n)l=d.shift();if(sa(a.doc,m)){m.height!=0&&$(m,0);if(m.widgets&&k.previousSibling)for(var t=
0;t<m.widgets.length;++t){var p=m.widgets[t];if(p.showIfHidden){var w=k.previousSibling;if(/pre/i.test(w.nodeName)){var r=v("div",null,null,"position: relative");w.parentNode.replaceChild(r,w);r.appendChild(w);w=r}r=w.appendChild(v("div",[p.node],"CodeMirror-linewidget"));if(!p.handleMouseEvents)r.ignoreEvents=true;lc(p,r,w,g)}}}else if(l&&l.from<=n&&l.to>n){for(;k.lineObj!=m;)k=f(k);h&&e<=n&&k.lineNumber&&cd(k.lineNumber,String(a.options.lineNumberFormatter(n+a.options.firstLineNumber)));k=k.nextSibling}else{if(m.widgets){r=
0;for(var u=k;u&&r<20;++r,u=u.nextSibling)if(u.lineObj==m&&/div/i.test(u.nodeName)){t=u;break}}r=a;var D=n,o=t;u=mc(r,m);var y=m.gutterMarkers,E=r.display;if(!r.options.lineNumbers&&!y&&!m.bgClass&&!m.wrapClass&&!m.widgets)p=u;else{if(o){o.alignable=null;for(var F=true,K=0,aa=null,M=o.firstChild,dd;M;M=dd){dd=M.nextSibling;if(/\bCodeMirror-linewidget\b/.test(M.className)){for(var X=0;X<m.widgets.length;++X){var R=m.widgets[X];if(R.node==M.firstChild){if(!R.above&&!aa)aa=M;lc(R,M,o,g);++K;break}}if(X==
m.widgets.length){F=false;break}}else o.removeChild(M)}o.insertBefore(u,aa);if(F&&K==m.widgets.length){p=o;o.className=m.wrapClass||""}}if(!p){p=v("div",null,m.wrapClass,"position: relative");p.appendChild(u)}m.bgClass&&p.insertBefore(v("div",null,m.bgClass+" CodeMirror-linebackground"),p.firstChild);if(r.options.lineNumbers||y){w=p.insertBefore(v("div",null,null,"position: absolute; left: "+(r.options.fixedGutter?g.fixedPos:-g.gutterTotalWidth)+"px"),p.firstChild);if(r.options.fixedGutter)(p.alignable||
(p.alignable=[])).push(w);if(r.options.lineNumbers&&(!y||!y["CodeMirror-linenumbers"]))p.lineNumber=w.appendChild(v("div",String(r.options.lineNumberFormatter(D+r.options.firstLineNumber)),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+g.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+E.lineNumInnerWidth+"px"));if(y)for(X=0;X<r.options.gutters.length;++X){R=r.options.gutters[X];(D=y.hasOwnProperty(R)&&y[R])&&w.appendChild(v("div",[D],"CodeMirror-gutter-elt","left: "+g.gutterLeft[R]+"px; width: "+
g.gutterWidth[R]+"px"))}}if(Ba)p.style.zIndex=2;if(m.widgets&&p!=o){X=0;for(o=m.widgets;X<o.length;++X){R=o[X];y=v("div",[R.node],"CodeMirror-linewidget");if(!R.handleMouseEvents)y.ignoreEvents=true;lc(R,y,p,g);R.above?p.insertBefore(y,r.options.lineNumbers&&m.height!=0?w:u):p.appendChild(y);T(R,"redraw")}}p=p}if(p!=t)j.insertBefore(p,k);else{for(;k!=t;)k=f(k);k=k.nextSibling}p.lineObj=m}++n});k;)k=f(k)}function lc(a,b,c,d){if(a.noHScroll){(c.alignable||(c.alignable=[])).push(b);c=d.wrapperWidth;
b.style.left=d.fixedPos+"px";if(!a.coverGutter){c-=d.gutterTotalWidth;b.style.paddingLeft=d.gutterTotalWidth+"px"}b.style.width=c+"px"}if(a.coverGutter){b.style.zIndex=5;b.style.position="relative";if(!a.noHScroll)b.style.marginLeft=-d.gutterTotalWidth+"px"}}function kc(a){var b=a.display,c=G(a.doc.sel.from,a.doc.sel.to);if(c||a.options.showCursorWhenSelecting){var d=a.display,e=da(a,a.doc.sel.head,"div");d.cursor.style.left=e.left+"px";d.cursor.style.top=e.top+"px";d.cursor.style.height=Math.max(0,
e.bottom-e.top)*a.options.cursorHeight+"px";d.cursor.style.display="";if(e.other){d.otherCursor.style.display="";d.otherCursor.style.left=e.other.left+"px";d.otherCursor.style.top=e.other.top+"px";d.otherCursor.style.height=(e.other.bottom-e.other.top)*0.85+"px"}else d.otherCursor.style.display="none"}else b.cursor.style.display=b.otherCursor.style.display="none";if(c)b.selectionDiv.style.display="none";else ke(a);if(a.options.moveInputWithCursor){a=da(a,a.doc.sel.head,"div");c=I(b.wrapper);d=I(b.lineDiv);
b.inputDiv.style.top=Math.max(0,Math.min(b.wrapper.clientHeight-10,a.top+d.top-c.top))+"px";b.inputDiv.style.left=Math.max(0,Math.min(b.wrapper.clientWidth-10,a.left+d.left-c.left))+"px"}}function ke(a){function b(l,n,m,t){if(n<0)n=0;g.appendChild(v("div",null,"CodeMirror-selected","position: absolute; left: "+l+"px; top: "+n+"px; width: "+(m==null?i-l:m)+"px; height: "+(t-n)+"px"))}function c(l,n,m){var t=x(e,l),p=t.text.length,w,r;le(ea(t),n||0,m==null?p:m,function(u,D,o){var y=yb(a,s(l,u),"div",
t,"left"),E,F;if(u==D){E=y;o=F=y.left}else{E=yb(a,s(l,D-1),"div",t,"right");if(o=="rtl"){o=y;y=E;E=o}o=y.left;F=E.right}if(n==null&&u==0)o=h;if(E.top-y.top>3){b(o,y.top,null,y.bottom);o=h;y.bottom<E.top&&b(o,y.bottom,null,E.top)}if(m==null&&D==p)F=i;if(!w||y.top<w.top||y.top==w.top&&y.left<w.left)w=y;if(!r||E.bottom>r.bottom||E.bottom==r.bottom&&E.right>r.right)r=E;if(o<h+1)o=h;b(o,E.top,F-o,E.bottom)});return{start:w,end:r}}var d=a.display,e=a.doc,f=a.doc.sel,g=document.createDocumentFragment(),
i=d.lineSpace.offsetWidth,h=fa(a.display.measure,v("pre",null,null,"text-align: left")).appendChild(v("span","x")).offsetLeft;if(f.from.line==f.to.line)c(f.from.line,f.from.ch,f.to.ch);else{var j=x(e,f.from.line),k=x(e,f.to.line);k=ia(e,j)==ia(e,k);j=c(f.from.line,f.from.ch,k?j.text.length:null).end;f=c(f.to.line,k?0:null,f.to.ch).start;if(k)if(j.top<f.top-2){b(j.right,j.top,null,j.bottom);b(h,f.top,f.left,f.bottom)}else b(j.right,j.top,f.left-j.right,j.bottom);j.bottom<f.top&&b(h,j.bottom,null,f.top)}fa(d.selectionDiv,
g);d.selectionDiv.style.display=""}function zb(a){if(a.state.focused){var b=a.display;clearInterval(b.blinker);var c=true;b.cursor.style.visibility=b.otherCursor.style.visibility="";b.blinker=setInterval(function(){b.cursor.style.visibility=b.otherCursor.style.visibility=(c=!c)?"":"hidden"},a.options.cursorBlinkRate)}}function Ua(a,b){a.doc.mode.startState&&a.doc.frontier<a.display.showingTo&&a.state.highlight.set(b,Z(me,a))}function me(a){var b=a.doc;if(b.frontier<b.first)b.frontier=b.first;if(!(b.frontier>=
a.display.showingTo)){var c=+new Date+a.options.workTime,d=Ga(b.mode,$a(a,b.frontier)),e=[],f;b.iter(b.frontier,Math.min(b.first+b.size,a.display.showingTo+500),function(g){if(b.frontier>=a.display.showingFrom){var i=g.styles;g.styles=ed(a,g,d);for(var h=!i||i.length!=g.styles.length,j=0;!h&&j<i.length;++j)h=i[j]!=g.styles[j];if(h)if(f&&f.end==b.frontier)f.end++;else e.push(f={start:b.frontier,end:b.frontier+1});g.stateAfter=Ga(b.mode,d)}else{fd(a,g,d);g.stateAfter=b.frontier%5==0?Ga(b.mode,d):null}++b.frontier;
if(+new Date>c){Ua(a,a.options.workDelay);return true}});e.length&&A(a,function(){for(var g=0;g<e.length;++g)L(this,e[g].start,e[g].end)})()}}function ne(a,b,c){var d,e,f=a.doc,g=b;for(b=b-100;g>b;--g){if(g<=f.first)return f.first;var i=x(f,g-1);if(i.stateAfter&&(!c||g<=f.frontier))return g;i=Ha(i.text,null,a.options.tabSize);if(e==null||d>i){e=g-1;d=i}}return e}function $a(a,b,c){var d=a.doc,e=a.display;if(!d.mode.startState)return true;var f=ne(a,b,c),g=f>d.first&&x(d,f-1).stateAfter;g=g?Ga(d.mode,
g):gd(d.mode);d.iter(f,b,function(i){fd(a,i,g);i.stateAfter=f==b-1||f%5==0||f>=e.showingFrom&&f<e.showingTo?Ga(d.mode,g):null;++f});return g}function nc(a,b,c,d,e){var f=-1;d=d||oc(a,b);for(a=c;;a+=f){var g=d[a];if(g)break;if(f<0&&a==0)f=1}e=a>c?"left":a<c?"right":e;if(e=="left"&&g.leftSide)g=g.leftSide;else if(e=="right"&&g.rightSide)g=g.rightSide;return{left:a<c?g.right:g.left,right:a>c?g.left:g.right,top:g.top,bottom:g.bottom}}function pc(a,b){for(var c=a.display.measureLineCache,d=0;d<c.length;++d){var e=
c[d];if(e.text==b.text&&e.markedSpans==b.markedSpans&&a.display.scroller.clientWidth==e.width&&e.classes==b.textClass+"|"+b.bgClass+"|"+b.wrapClass)return e}}function oe(a,b){var c=pc(a,b);if(c)c.text=c.measure=c.markedSpans=null}function oc(a,b){var c=pc(a,b);if(c)return c.measure;c=pe(a,b);var d=a.display.measureLineCache,e={text:b.text,width:a.display.scroller.clientWidth,markedSpans:b.markedSpans,measure:c,classes:b.textClass+"|"+b.bgClass+"|"+b.wrapClass};if(d.length==16)d[++a.display.measureLineCachePos%
16]=e;else d.push(e);return c}function pe(a,b){function c(w){var r=w.top-m.top,u=w.bottom-m.top;if(u>p)u=p;if(r<0)r=0;for(var D=t.length-2;D>=0;D-=2){var o=t[D],y=t[D+1];if(!(o>u||y<r))if(o<=r&&y>=u||r<=o&&u>=y||Math.min(u,y)-Math.max(r,o)>=u-r>>1){t[D]=Math.min(r,o);t[D+1]=Math.max(u,y);break}}if(D<0){D=t.length;t.push(r,u)}return{left:w.left-m.left,right:w.right-m.left,top:D,bottom:null}}function d(w){w.bottom=t[w.top+1];w.top=t[w.top]}var e=a.display,f=hd(b.text.length),g=mc(a,b,f,true);if(J&&
!Ba&&!a.options.lineWrapping&&g.childNodes.length>100){for(var i=document.createDocumentFragment(),h=g.childNodes.length,j=0,k=Math.ceil(h/10);j<k;++j){for(var l=v("div",null,null,"display: inline-block"),n=0;n<10&&h;++n){l.appendChild(g.firstChild);--h}i.appendChild(l)}g.appendChild(i)}fa(e.measure,g);var m=I(e.lineDiv),t=[];i=hd(b.text.length);var p=g.offsetHeight;Y&&e.measure.first!=g&&fa(e.measure,g);for(j=0;j<f.length;++j)if(e=f[j]){g=e;h=null;if(/\bCodeMirror-widget\b/.test(e.className)&&e.getClientRects){if(e.firstChild.nodeType==
1)g=e.firstChild;k=g.getClientRects();if(k.length>1){h=i[j]=c(k[0]);h.rightSide=c(k[k.length-1])}}h||(h=i[j]=c(I(g)));if(e.measureRight)h.right=I(e.measureRight).left;if(e.leftSide)h.leftSide=c(I(e.leftSide))}for(j=0;j<i.length;++j)if(e=i[j]){d(e);e.leftSide&&d(e.leftSide);e.rightSide&&d(e.rightSide)}return i}function Da(a){a.display.measureLineCache.length=a.display.measureLineCachePos=0;a.display.cachedCharWidth=a.display.cachedTextHeight=null;if(!a.options.lineWrapping)a.display.maxLineChanged=
true;a.display.lineNumChars=null}function qc(a,b,c,d){if(b.widgets)for(var e=0;e<b.widgets.length;++e)if(b.widgets[e].above){var f=Ab(b.widgets[e]);c.top+=f;c.bottom+=f}if(d=="line")return c;d||(d="local");b=Za(a,b);if(d=="local")b+=a.display.lineSpace.offsetTop;else b-=a.display.viewOffset;if(d=="page"||d=="window"){a=I(a.display.lineSpace);b+=a.top+(d=="window"?0:window.pageYOffset||(document.documentElement||document.body).scrollTop);d=a.left+(d=="window"?0:window.pageXOffset||(document.documentElement||
document.body).scrollLeft);c.left+=d;c.right+=d}c.top+=b;c.bottom+=b;return c}function id(a,b,c){if(c=="div")return b;var d=b.left;b=b.top;if(c=="page"){d-=window.pageXOffset||(document.documentElement||document.body).scrollLeft;b-=window.pageYOffset||(document.documentElement||document.body).scrollTop}else if(c=="local"||!c){c=I(a.display.sizer);d+=c.left;b+=c.top}a=I(a.display.lineSpace);return{left:d-a.left,top:b-a.top}}function yb(a,b,c,d,e){d||(d=x(a.doc,b.line));return qc(a,d,nc(a,d,b.ch,null,
e),c)}function da(a,b,c,d,e){function f(j,k){var l=nc(a,d,j,e,k?"right":"left");if(k)l.left=l.right;else l.right=l.left;return qc(a,d,l,c)}function g(j,k){var l=i[k],n=l.level%2;if(j==(l.level%2?l.to:l.from)&&k&&l.level<i[k-1].level){l=i[--k];j=rc(l)-(l.level%2?0:1);n=true}else if(j==rc(l)&&k<i.length-1&&l.level<i[k+1].level){l=i[++k];j=(l.level%2?l.to:l.from)-l.level%2;n=false}if(n&&j==l.to&&j>l.from)return f(j-1);return f(j,n)}d=d||x(a.doc,b.line);e||(e=oc(a,d));var i=ea(d);b=b.ch;if(!i)return f(b);
var h=sc(i,b);h=g(b,h);if(Ia!=null)h.other=g(b,Ia);return h}function Bb(a,b,c,d){a=new s(a,b);a.xRel=d;if(c)a.outside=true;return a}function tc(a,b,c){var d=a.doc;c+=a.display.viewOffset;if(c<0)return Bb(d.first,0,true,-1);var e=Xa(d,c),f=d.first+d.size-1;if(e>f)return Bb(d.first+d.size-1,x(d,f).text.length,true,1);if(b<0)b=0;for(;;){f=x(d,e);e=qe(a,f,e,b,c);var g=(f=wb(f))&&f.find();if(f&&(e.ch>g.from.ch||e.ch==g.from.ch&&e.xRel>0))e=g.to.line;else return e}}function qe(a,b,c,d,e){function f(o){o=
da(a,s(c,o),"line",b,j);i=true;if(g>o.bottom)return o.left-h;else if(g<o.top)return o.left+h;else i=false;return o.left}var g=e-Za(a,b),i=false,h=2*a.display.wrapper.clientWidth,j=oc(a,b),k=ea(b),l=b.text.length;e=Cb(b);var n=Db(b),m=f(e),t=i,p=f(n),w=i;if(d>p)return Bb(c,n,w,1);for(;;){if(k?n==e||n==uc(b,e,1):n-e<=1){k=d<m||d-m<=p-d?e:n;for(d=d-(k==e?m:p);vc.test(b.text.charAt(k));)++k;return Bb(c,k,k==e?t:w,d<0?-1:d?1:0)}var r=Math.ceil(l/2),u=e+r;if(k){u=e;for(var D=0;D<r;++D)u=uc(b,u,1)}D=f(u);
if(D>d){n=u;p=D;if(w=i)p+=1E3;l=r}else{e=u;m=D;t=i;l-=r}}}function Ca(a){if(a.cachedTextHeight!=null)return a.cachedTextHeight;if(ta==null){ta=v("pre");for(var b=0;b<49;++b){ta.appendChild(document.createTextNode("x"));ta.appendChild(v("br"))}ta.appendChild(document.createTextNode("x"))}fa(a.measure,ta);b=ta.offsetHeight/50;if(b>3)a.cachedTextHeight=b;ub(a.measure);return b||1}function Zc(a){if(a.cachedCharWidth!=null)return a.cachedCharWidth;var b=v("span","x"),c=v("pre",[b]);fa(a.measure,c);b=b.offsetWidth;
if(b>2)a.cachedCharWidth=b;return b||10}function Ja(a){a.curOp={changes:[],forceUpdate:false,updateInput:null,userSelChange:null,textChanged:null,selectionChanged:false,cursorActivity:false,updateMaxLine:false,updateScrollPos:false,id:++re};Eb++||(na=[])}function Ka(a){var b=a.curOp,c=a.doc,d=a.display;a.curOp=null;b.updateMaxLine&&gc(a);if(d.maxLineChanged&&!a.options.lineWrapping&&d.maxLine){var e;e=d.maxLine;var f=false;if(e.markedSpans)for(var g=0;g<e.markedSpans;++g){var i=e.markedSpans[g];if(i.collapsed&&
(i.to==null||i.to==e.text.length))f=true}if(f=!f&&pc(a,e))e=nc(a,e,e.text.length,f.measure,"right").right;else{e=mc(a,e,null,true);f=e.appendChild(ab(a.display.measure));fa(a.display.measure,e);e=I(f).right-I(a.display.lineDiv).left}d.sizer.style.minWidth=Math.max(0,e+3+Aa)+"px";d.maxLineChanged=false;e=Math.max(0,d.sizer.offsetLeft+d.sizer.offsetWidth-d.scroller.clientWidth);e<c.scrollLeft&&!b.updateScrollPos&&La(a,Math.min(d.scroller.scrollLeft,e),true)}var h,j;if(b.updateScrollPos)h=b.updateScrollPos;
else if(b.selectionChanged&&d.scroller.clientHeight){h=da(a,c.sel.head);h=Fb(a,h.left,h.top,h.left,h.bottom)}if(b.changes.length||b.forceUpdate||h&&h.scrollTop!=null){j=xb(a,b.changes,h&&h.scrollTop,b.forceUpdate);if(a.display.scroller.offsetHeight)a.doc.scrollTop=a.display.scroller.scrollTop}!j&&b.selectionChanged&&kc(a);if(b.updateScrollPos){d.scroller.scrollTop=d.scrollbarV.scrollTop=c.scrollTop=h.scrollTop;d.scroller.scrollLeft=d.scrollbarH.scrollLeft=c.scrollLeft=h.scrollLeft;fc(a);b.scrollToPos&&
jd(a,z(a.doc,b.scrollToPos),b.scrollToPosMargin)}else if(h){c=jd(a,a.doc.sel.head,a.options.cursorScrollMargin);if(a.state.focused){d=a.display;h=I(d.sizer);j=null;if(c.top+h.top<0)j=true;else if(c.bottom+h.top>(window.innerHeight||document.documentElement.clientHeight))j=false;if(j!=null&&!se){if(h=d.cursor.style.display=="none"){d.cursor.style.display="";d.cursor.style.left=c.left+"px";d.cursor.style.top=c.top-d.viewOffset+"px"}d.cursor.scrollIntoView(j);if(h)d.cursor.style.display="none"}}}b.selectionChanged&&
zb(a);a.state.focused&&b.updateInput&&ma(a,b.userSelChange);c=b.maybeHiddenMarkers;d=b.maybeUnhiddenMarkers;if(c)for(j=0;j<c.length;++j)c[j].lines.length||O(c[j],"hide");if(d)for(j=0;j<d.length;++j)d[j].lines.length&&O(d[j],"unhide");var k;if(!--Eb){k=na;na=null}b.textChanged&&O(a,"change",a,b.textChanged);b.cursorActivity&&O(a,"cursorActivity",a);if(k)for(j=0;j<k.length;++j)k[j]()}function A(a,b){return function(){var c=a||this,d=!c.curOp;d&&Ja(c);try{var e=b.apply(c,arguments)}finally{d&&Ka(c)}return e}}
function bb(a){return function(){var b=this.cm&&!this.cm.curOp,c;b&&Ja(this.cm);try{c=a.apply(this,arguments)}finally{b&&Ka(this.cm)}return c}}function wc(a,b){var c=!a.curOp,d;c&&Ja(a);try{d=b()}finally{c&&Ka(a)}return d}function L(a,b,c,d){if(b==null)b=a.doc.first;if(c==null)c=a.doc.first+a.doc.size;a.curOp.changes.push({from:b,to:c,diff:d})}function Gb(a){a.display.pollingFast||a.display.poll.set(a.options.pollInterval,function(){xc(a);a.state.focused&&Gb(a)})}function cb(a){function b(){if(!xc(a)&&
!c){c=true;a.display.poll.set(60,b)}else{a.display.pollingFast=false;Gb(a)}}var c=false;a.display.pollingFast=true;a.display.poll.set(20,b)}function xc(a){var b=a.display.input,c=a.display.prevInput,d=a.doc,e=d.sel;if(!a.state.focused||te(b)||db(a)||a.state.disableInput)return false;var f=b.value;if(f==c&&G(e.from,e.to))return false;if(J&&!Y&&a.display.inputHasSelection===f){ma(a,true);return false}var g=!a.curOp;g&&Ja(a);e.shift=false;for(var i=0,h=Math.min(c.length,f.length);i<h&&c.charCodeAt(i)==
f.charCodeAt(i);)++i;h=e.from;e=e.to;if(i<c.length)h=s(h.line,h.ch-(c.length-i));else if(a.state.overwrite&&G(h,e)&&!a.state.pasteIncoming)e=s(e.line,Math.min(x(d,e.line).text.length,e.ch+(f.length-i)));c=a.curOp.updateInput;i={from:h,to:e,text:ua(f.slice(i)),origin:a.state.pasteIncoming?"paste":"+input"};Ma(a.doc,i,"end");a.curOp.updateInput=c;T(a,"inputRead",a,i);if(f.length>1E3||f.indexOf("\n")>-1)b.value=a.display.prevInput="";else a.display.prevInput=f;g&&Ka(a);a.state.pasteIncoming=false;return true}
function ma(a,b){var c,d,e=a.doc;if(G(e.sel.from,e.sel.to)){if(b){a.display.prevInput=a.display.input.value="";if(J&&!Y)a.display.inputHasSelection=null}}else{a.display.prevInput="";d=(c=kd&&(e.sel.to.line-e.sel.from.line>100||(d=a.getSelection()).length>1E3))?"-":d||a.getSelection();a.display.input.value=d;a.state.focused&&ld(a.display.input);if(J&&!Y)a.display.inputHasSelection=d}a.display.inaccurateSelection=c}function U(a){if(a.options.readOnly!="nocursor"&&(!ac||document.activeElement!=a.display.input))a.display.input.focus()}
function db(a){return a.options.readOnly||a.doc.cantEdit}function be(a){function b(){a.state.focused&&setTimeout(Z(U,a),0)}function c(){if(i==null)i=setTimeout(function(){i=null;g.cachedCharWidth=g.cachedTextHeight=eb=null;Da(a);wc(a,Z(L,a))},100)}function d(){for(var h=g.wrapper.parentNode;h&&h!=document.body;h=h.parentNode);h?setTimeout(d,5E3):ja(window,"resize",c)}function e(h){ga(a,h)||a.options.onDragEvent&&a.options.onDragEvent(a,fb(h))||gb(h)}function f(){if(g.inaccurateSelection){g.prevInput=
"";g.inaccurateSelection=false;g.input.value=a.getSelection();ld(g.input)}}var g=a.display;B(g.scroller,"mousedown",A(a,ue));J?B(g.scroller,"dblclick",A(a,function(h){if(!ga(a,h)){var j=hb(a,h);if(!(!j||md(a,h)||va(a.display,h))){N(h);h=yc(x(a.doc,j.line).text,j);P(a.doc,h.from,h.to)}}})):B(g.scroller,"dblclick",function(h){ga(a,h)||N(h)});B(g.lineSpace,"selectstart",function(h){va(g,h)||N(h)});zc||B(g.scroller,"contextmenu",function(h){nd(a,h)});B(g.scroller,"scroll",function(){if(g.scroller.clientHeight){ib(a,
g.scroller.scrollTop);La(a,g.scroller.scrollLeft,true);O(a,"scroll",a)}});B(g.scrollbarV,"scroll",function(){g.scroller.clientHeight&&ib(a,g.scrollbarV.scrollTop)});B(g.scrollbarH,"scroll",function(){g.scroller.clientHeight&&La(a,g.scrollbarH.scrollLeft)});B(g.scroller,"mousewheel",function(h){od(a,h)});B(g.scroller,"DOMMouseScroll",function(h){od(a,h)});B(g.scrollbarH,"mousedown",b);B(g.scrollbarV,"mousedown",b);B(g.wrapper,"scroll",function(){g.wrapper.scrollTop=g.wrapper.scrollLeft=0});var i;B(window,
"resize",c);setTimeout(d,5E3);B(g.input,"keyup",A(a,function(h){if(!(ga(a,h)||a.options.onKeyEvent&&a.options.onKeyEvent(a,fb(h))))if(h.keyCode==16)a.doc.sel.shift=false}));B(g.input,"input",Z(cb,a));B(g.input,"keydown",A(a,pd));B(g.input,"keypress",A(a,ve));B(g.input,"focus",Z(ra,a));B(g.input,"blur",Z(cc,a));if(a.options.dragDrop){B(g.scroller,"dragstart",function(h){var j=a;if(J&&(!j.state.draggingText||+new Date-qd<100))gb(h);else if(!(ga(j,h)||va(j.display,h))){var k=j.getSelection();h.dataTransfer.setData("Text",
k);if(h.dataTransfer.setDragImage&&!Ac){k=v("img",null,null,"position: fixed; left: 0; top: 0;");if(ba){k.width=k.height=1;j.display.wrapper.appendChild(k);k._top=k.offsetTop}h.dataTransfer.setDragImage(k,0,0);ba&&k.parentNode.removeChild(k)}}});B(g.scroller,"dragenter",e);B(g.scroller,"dragover",e);B(g.scroller,"drop",A(a,we))}B(g.scroller,"paste",function(h){if(!va(g,h)){U(a);cb(a)}});B(g.input,"paste",function(){a.state.pasteIncoming=true;cb(a)});B(g.input,"cut",f);B(g.input,"copy",f);ec&&B(g.sizer,
"mouseup",function(){document.activeElement==g.input&&g.input.blur();U(a)})}function va(a,b){for(var c=b.target||b.srcElement;c!=a.wrapper;c=c.parentNode)if(!c||c.ignoreEvents||c.parentNode==a.sizer&&c!=a.mover)return true}function hb(a,b,c){var d=a.display;if(!c){c=b.target||b.srcElement;if(c==d.scrollbarH||c==d.scrollbarH.firstChild||c==d.scrollbarV||c==d.scrollbarV.firstChild||c==d.scrollbarFiller||c==d.gutterFiller)return null}var e,f;d=I(d.lineSpace);try{e=b.clientX;f=b.clientY}catch(g){return null}return tc(a,
e-d.left,f-d.top)}function ue(a){function b(o){if(!G(p,o)){p=o;if(k=="single")P(e.doc,z(g,h),o);else{m=z(g,m);t=z(g,t);if(k=="double"){var y=yc(x(g,o.line).text,o);H(o,m)?P(e.doc,y.from,t):P(e.doc,m,y.to)}else if(k=="triple")H(o,m)?P(e.doc,t,z(g,s(o.line,0))):P(e.doc,m,z(g,s(o.line+1,0)))}}}function c(o){var y=++r,E=hb(e,o,true);if(E)if(G(E,l)){var F=o.clientY<w.top?-20:o.clientY>w.bottom?20:0;F&&setTimeout(A(e,function(){if(r==y){f.scroller.scrollTop+=F;c(o)}}),50)}else{e.state.focused||ra(e);l=
E;b(E);var K=ic(f,g);if(E.line>=K.to||E.line<K.from)setTimeout(A(e,function(){r==y&&c(o)}),150)}}function d(o){r=Infinity;N(o);U(e);ja(document,"mousemove",u);ja(document,"mouseup",D)}if(!ga(this,a)){var e=this,f=e.display,g=e.doc,i=g.sel;i.shift=a.shiftKey;if(va(f,a)){if(!V){f.scroller.draggable=false;setTimeout(function(){f.scroller.draggable=true},100)}}else if(!md(e,a)){var h=hb(e,a);switch(rd(a)){case 3:zc&&nd.call(e,e,a);return;case 2:h&&P(e.doc,h);setTimeout(Z(U,e),20);N(a);return}if(h){e.state.focused||
ra(e);var j=+new Date,k="single";if(Hb&&Hb.time>j-400&&G(Hb.pos,h)){k="triple";N(a);setTimeout(Z(U,e),20);xe(e,h.line)}else if(Ib&&Ib.time>j-400&&G(Ib.pos,h)){k="double";Hb={time:j,pos:h};N(a);j=yc(x(g,h.line).text,h);P(e.doc,j.from,j.to)}else Ib={time:j,pos:h};var l=h;if(e.options.dragDrop&&ye&&!db(e)&&!G(i.from,i.to)&&!H(h,i.from)&&!H(i.to,h)&&k=="single"){var n=A(e,function(o){if(V)f.scroller.draggable=false;e.state.draggingText=false;ja(document,"mouseup",n);ja(f.scroller,"drop",n);if(Math.abs(a.clientX-
o.clientX)+Math.abs(a.clientY-o.clientY)<10){N(o);P(e.doc,h);U(e)}});if(V)f.scroller.draggable=true;e.state.draggingText=n;f.scroller.dragDrop&&f.scroller.dragDrop();B(document,"mouseup",n);B(f.scroller,"drop",n)}else{N(a);k=="single"&&P(e.doc,z(g,h));var m=i.from,t=i.to,p=h,w=I(f.wrapper),r=0,u=A(e,function(o){!J&&!rd(o)?d(o):c(o)}),D=A(e,d);B(document,"mousemove",u);B(document,"mouseup",D)}}else(a.target||a.srcElement)==f.scroller&&N(a)}}}function md(a,b){var c=a.display;try{var d=b.clientX,e=b.clientY}catch(f){return false}if(d>=
Math.floor(I(c.gutters).right))return false;N(b);if(!ka(a,"gutterClick"))return true;var g=I(c.lineDiv);if(e>g.bottom)return true;e-=g.top-c.viewOffset;for(g=0;g<a.options.gutters.length;++g){var i=c.gutters.childNodes[g];if(i&&I(i).right>=d){c=Xa(a.doc,e);T(a,"gutterClick",a,c,a.options.gutters[g],b);break}}return true}function we(a){var b=this;if(!(ga(b,a)||va(b.display,a)||b.options.onDragEvent&&b.options.onDragEvent(b,fb(a)))){N(a);if(J)qd=+new Date;var c=hb(b,a,true),d=a.dataTransfer.files;if(!(!c||
db(b)))if(d&&d.length&&window.FileReader&&window.File){var e=d.length,f=Array(e),g=0;a=function(k,l){var n=new FileReader;n.onload=function(){f[l]=n.result;if(++g==e){c=z(b.doc,c);Ma(b.doc,{from:c,to:c,text:ua(f.join("\n")),origin:"paste"},"around")}};n.readAsText(k)};for(var i=0;i<e;++i)a(d[i],i)}else if(b.state.draggingText&&!(H(c,b.doc.sel.from)||H(b.doc.sel.to,c))){b.state.draggingText(a);setTimeout(Z(U,b),20)}else try{if(f=a.dataTransfer.getData("Text")){i=b.doc.sel.from;var h=b.doc.sel.to;oa(b.doc,
c,c);b.state.draggingText&&pa(b.doc,"",i,h,"paste");b.replaceSelection(f,null,"paste");U(b);ra(b)}}catch(j){}}}function ib(a,b){if(!(Math.abs(a.doc.scrollTop-b)<2)){a.doc.scrollTop=b;Na||xb(a,[],b);if(a.display.scroller.scrollTop!=b)a.display.scroller.scrollTop=b;if(a.display.scrollbarV.scrollTop!=b)a.display.scrollbarV.scrollTop=b;Na&&xb(a,[]);Ua(a,100)}}function La(a,b,c){if(!(c?b==a.doc.scrollLeft:Math.abs(a.doc.scrollLeft-b)<2)){b=Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth);
a.doc.scrollLeft=b;fc(a);if(a.display.scroller.scrollLeft!=b)a.display.scroller.scrollLeft=b;if(a.display.scrollbarH.scrollLeft!=b)a.display.scrollbarH.scrollLeft=b}}function od(a,b){var c=b.wheelDeltaX,d=b.wheelDeltaY;if(c==null&&b.detail&&b.axis==b.HORIZONTAL_AXIS)c=b.detail;if(d==null&&b.detail&&b.axis==b.VERTICAL_AXIS)d=b.detail;else if(d==null)d=b.wheelDelta;var e=a.display,f=e.scroller;if(c&&f.scrollWidth>f.clientWidth||d&&f.scrollHeight>f.clientHeight){if(d&&Fa&&V)for(var g=b.target;g!=f;g=
g.parentNode)if(g.lineObj){a.display.currentWheelTarget=g;break}if(c&&!Na&&!ba&&ca!=null){d&&ib(a,Math.max(0,Math.min(f.scrollTop+d*ca,f.scrollHeight-f.clientHeight)));La(a,Math.max(0,Math.min(f.scrollLeft+c*ca,f.scrollWidth-f.clientWidth)));N(b);e.wheelStartX=null}else{if(d&&ca!=null){g=d*ca;var i=a.doc.scrollTop,h=i+e.wrapper.clientHeight;if(g<0)i=Math.max(0,i+g-50);else h=Math.min(a.doc.height,h+g+50);xb(a,[],{top:i,bottom:h})}if(Jb<20)if(e.wheelStartX==null){e.wheelStartX=f.scrollLeft;e.wheelStartY=
f.scrollTop;e.wheelDX=c;e.wheelDY=d;setTimeout(function(){if(e.wheelStartX!=null){var j=f.scrollLeft-e.wheelStartX,k=f.scrollTop-e.wheelStartY;j=k&&e.wheelDY&&k/e.wheelDY||j&&e.wheelDX&&j/e.wheelDX;e.wheelStartX=e.wheelStartY=null;if(j){ca=(ca*Jb+j)/(Jb+1);++Jb}}},200)}else{e.wheelDX+=c;e.wheelDY+=d}}}}function Kb(a,b,c){if(typeof b=="string"){b=Bc[b];if(!b)return false}if(a.display.pollingFast&&xc(a))a.display.pollingFast=false;var d=a.doc,e=d.sel.shift,f=false;try{if(db(a))a.state.suppressEdits=
true;if(c)d.sel.shift=false;f=b(a)!=sd}finally{d.sel.shift=e;a.state.suppressEdits=false}return f}function td(a){var b=a.state.keyMaps.slice(0);a.options.extraKeys&&b.push(a.options.extraKeys);b.push(a.options.keyMap);return b}function ud(a,b){var c=Cc(a.options.keyMap),d=c.auto;clearTimeout(vd);if(d&&!wd(b))vd=setTimeout(function(){if(Cc(a.options.keyMap)==c){a.options.keyMap=d.call?d.call(null,a):d;ad(a)}},50);var e=xd(b,true),f=false;if(!e)return false;f=td(a);if(f=b.shiftKey?jb("Shift-"+e,f,function(g){return Kb(a,
g,true)})||jb(e,f,function(g){if(typeof g=="string"?/^go[A-Z]/.test(g):g.motion)return Kb(a,g)}):jb(e,f,function(g){return Kb(a,g)})){N(b);zb(a);if(Y){b.oldKeyCode=b.keyCode;b.keyCode=0}T(a,"keyHandled",a,e,b)}return f}function ze(a,b,c){var d=jb("'"+c+"'",td(a),function(e){return Kb(a,e,true)});if(d){N(b);zb(a);T(a,"keyHandled",a,"'"+c+"'",b)}return d}function pd(a){this.state.focused||ra(this);if(J&&a.keyCode==27)a.returnValue=false;if(!(ga(this,a)||this.options.onKeyEvent&&this.options.onKeyEvent(this,
fb(a)))){var b=a.keyCode;this.doc.sel.shift=b==16||a.shiftKey;var c=ud(this,a);if(ba){Dc=c?b:null;if(!c&&b==88&&!kd&&(Fa?a.metaKey:a.ctrlKey))this.replaceSelection("")}}}function ve(a){var b=this;if(!(ga(b,a)||b.options.onKeyEvent&&b.options.onKeyEvent(b,fb(a)))){var c=a.keyCode,d=a.charCode;if(ba&&c==Dc){Dc=null;N(a)}else if(!((ba&&(!a.which||a.which<10)||ec)&&ud(b,a))){c=String.fromCharCode(d==null?c:d);this.options.electricChars&&this.doc.mode.electricChars&&this.options.smartIndent&&!db(this)&&
this.doc.mode.electricChars.indexOf(c)>-1&&setTimeout(A(b,function(){Lb(b,b.doc.sel.to.line,"smart")}),75);if(!ze(b,a,c)){if(J&&!Y)b.display.inputHasSelection=null;cb(b)}}}}function ra(a){if(a.options.readOnly!="nocursor"){if(!a.state.focused){O(a,"focus",a);a.state.focused=true;if(a.display.wrapper.className.search(/\bCodeMirror-focused\b/)==-1)a.display.wrapper.className+=" CodeMirror-focused";ma(a,true)}Gb(a);zb(a)}}function cc(a){if(a.state.focused){O(a,"blur",a);a.state.focused=false;a.display.wrapper.className=
a.display.wrapper.className.replace(" CodeMirror-focused","")}clearInterval(a.display.blinker);setTimeout(function(){if(!a.state.focused)a.doc.sel.shift=false},150)}function nd(a,b){function c(){if(e.input.selectionStart!=null){var k=e.input.value=" "+(G(f.from,f.to)?"":e.input.value);e.prevInput=" ";e.input.selectionStart=1;e.input.selectionEnd=k.length}}function d(){e.inputDiv.style.position="relative";e.input.style.cssText=h;if(Y)e.scrollbarV.scrollTop=e.scroller.scrollTop=i;Gb(a);if(e.input.selectionStart!=
null){if(!J||Y)c();clearTimeout(Ec);var k=0,l=function(){if(e.prevInput==" "&&e.input.selectionStart==0)A(a,Bc.selectAll)(a);else if(k++<10)Ec=setTimeout(l,500);else ma(a)};Ec=setTimeout(l,200)}}if(!ga(a,b,"contextmenu")){var e=a.display,f=a.doc.sel;if(!va(e,b)){var g=hb(a,b),i=e.scroller.scrollTop;if(!(!g||ba)){if(G(f.from,f.to)||H(g,f.from)||!H(g,f.to))A(a,oa)(a.doc,g,g);var h=e.input.style.cssText;e.inputDiv.style.position="absolute";e.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+
(b.clientY-5)+"px; left: "+(b.clientX-5)+"px; z-index: 1000; background: white; outline: none;border-width: 0; outline: none; overflow: hidden; opacity: .05; -ms-opacity: .05; filter: alpha(opacity=5);";U(a);ma(a,true);if(G(f.from,f.to))e.input.value=e.prevInput=" ";J&&!Y&&c();if(zc){gb(b);var j=function(){ja(window,"mouseup",j);setTimeout(d,20)};B(window,"mouseup",j)}else setTimeout(d,50)}}}}function yd(a,b,c){if(!H(b.from,c))return z(a,c);var d=b.text.length-1-(b.to.line-b.from.line);if(c.line>
b.to.line+d){b=c.line-d;d=a.first+a.size-1;if(b>d)return s(d,x(a,d).text.length);return Mb(c,x(a,b).text.length)}if(c.line==b.to.line+d)return Mb(c,S(b.text).length+(b.text.length==1?b.from.ch:0)+x(a,b.to.line).text.length-b.to.ch);a=c.line-b.from.line;return Mb(c,b.text[a].length+(a?0:b.from.ch))}function Fc(a,b,c){if(c&&typeof c=="object")return{anchor:yd(a,b,c.anchor),head:yd(a,b,c.head)};if(c=="start")return{anchor:b.from,head:b.from};var d=Gc(b);if(c=="around")return{anchor:b.from,head:d};if(c==
"end")return{anchor:d,head:d};c=function(e){if(H(e,b.from))return e;if(!H(b.to,e))return d;var f=e.line+b.text.length-(b.to.line-b.from.line)-1,g=e.ch;if(e.line==b.to.line)g+=d.ch-b.to.ch;return s(f,g)};return{anchor:c(a.sel.anchor),head:c(a.sel.head)}}function zd(a,b,c){b={canceled:false,from:b.from,to:b.to,text:b.text,origin:b.origin,cancel:function(){this.canceled=true}};if(c)b.update=function(d,e,f,g){if(d)this.from=z(a,d);if(e)this.to=z(a,e);if(f)this.text=f;if(g!==undefined)this.origin=g};O(a,
"beforeChange",a,b);a.cm&&O(a.cm,"beforeChange",a.cm,b);if(b.canceled)return null;return{from:b.from,to:b.to,text:b.text,origin:b.origin}}function Ma(a,b,c,d){if(a.cm){if(!a.cm.curOp)return A(a.cm,Ma)(a,b,c,d);if(a.cm.state.suppressEdits)return}if(ka(a,"beforeChange")||a.cm&&ka(a.cm,"beforeChange")){b=zd(a,b,true);if(!b)return}if(d=Ad&&!d&&Ae(a,b.from,b.to)){for(var e=d.length-1;e>=1;--e)Hc(a,{from:d[e].from,to:d[e].to,text:[""]});d.length&&Hc(a,{from:d[0].from,to:d[0].to,text:b.text},c)}else Hc(a,
b,c)}function Hc(a,b,c){c=Fc(a,b,c);Bd(a,b,c,a.cm?a.cm.curOp.id:NaN);kb(a,b,c,Ic(a,b));var d=[];Oa(a,function(e,f){if(!f&&la(d,e.history)==-1){Cd(e.history,b);d.push(e.history)}kb(e,b,null,Ic(e,b))})}function Dd(a,b){if(!(a.cm&&a.cm.state.suppressEdits)){var c=a.history,d=(b=="undo"?c.done:c.undone).pop();if(d){var e={changes:[],anchorBefore:d.anchorAfter,headBefore:d.headAfter,anchorAfter:d.anchorBefore,headAfter:d.headBefore,generation:c.generation};(b=="undo"?c.undone:c.done).push(e);c.generation=
d.generation||++c.maxGeneration;for(var f=ka(a,"beforeChange")||a.cm&&ka(a.cm,"beforeChange"),g=d.changes.length-1;g>=0;--g){var i=d.changes[g];i.origin=b;if(f&&!zd(a,i,false)){(b=="undo"?c.done:c.undone).length=0;break}e.changes.push(Jc(a,i));var h=g?Fc(a,i,null):{anchor:d.anchorBefore,head:d.headBefore};kb(a,i,h,Ed(a,i));var j=[];Oa(a,function(k,l){if(!l&&la(j,k.history)==-1){Cd(k.history,i);j.push(k.history)}kb(k,i,null,Ed(k,i))})}}}}function Fd(a,b){function c(d){return s(d.line+b,d.ch)}a.first+=
b;a.cm&&L(a.cm,a.first,a.first,b);a.sel.head=c(a.sel.head);a.sel.anchor=c(a.sel.anchor);a.sel.from=c(a.sel.from);a.sel.to=c(a.sel.to)}function kb(a,b,c,d){if(a.cm&&!a.cm.curOp)return A(a.cm,kb)(a,b,c,d);if(b.to.line<a.first)Fd(a,b.text.length-1-(b.to.line-b.from.line));else if(!(b.from.line>a.lastLine())){if(b.from.line<a.first){var e=b.text.length-1-(a.first-b.from.line);Fd(a,e);b={from:s(a.first,0),to:s(b.to.line+e,b.to.ch),text:[S(b.text)],origin:b.origin}}e=a.lastLine();if(b.to.line>e)b={from:b.from,
to:s(e,x(a,e).text.length),text:[b.text[0]],origin:b.origin};b.removed=Kc(a,b.from,b.to);c||(c=Fc(a,b,null));a.cm?Be(a.cm,b,d,c):Lc(a,b,d,c)}}function Be(a,b,c,d){var e=a.doc,f=a.display,g=b.from,i=b.to,h=false,j=g.line;if(!a.options.lineWrapping){j=W(ia(e,x(e,g.line)));e.iter(j,i.line+1,function(k){if(k==f.maxLine)return h=true})}if(!H(e.sel.head,b.from)&&!H(b.to,e.sel.head))a.curOp.cursorActivity=true;Lc(e,b,c,d,Yc(a));if(!a.options.lineWrapping){e.iter(j,g.line+b.text.length,function(k){var l=
vb(e,k);if(l>f.maxLineLength){f.maxLine=k;f.maxLineLength=l;f.maxLineChanged=true;h=false}});if(h)a.curOp.updateMaxLine=true}e.frontier=Math.min(e.frontier,g.line);Ua(a,400);L(a,g.line,i.line+1,b.text.length-(i.line-g.line)-1);if(ka(a,"change")){b={from:g,to:i,text:b.text,removed:b.removed,origin:b.origin};if(a.curOp.textChanged){for(a=a.curOp.textChanged;a.next;a=a.next);a.next=b}else a.curOp.textChanged=b}}function pa(a,b,c,d,e){d||(d=c);if(H(d,c)){var f=d;d=c;c=f}if(typeof b=="string")b=ua(b);
Ma(a,{from:c,to:d,text:b,origin:e},null)}function s(a,b){if(!(this instanceof s))return new s(a,b);this.line=a;this.ch=b}function G(a,b){return a.line==b.line&&a.ch==b.ch}function H(a,b){return a.line<b.line||a.line==b.line&&a.ch<b.ch}function wa(a){return s(a.line,a.ch)}function z(a,b){if(b.line<a.first)return s(a.first,0);var c=a.first+a.size-1;if(b.line>c)return s(c,x(a,c).text.length);return Mb(b,x(a,b.line).text.length)}function Mb(a,b){var c=a.ch;return c==null||c>b?s(a.line,b):c<0?s(a.line,
0):a}function Pa(a,b){return b>=a.first&&b<a.first+a.size}function P(a,b,c,d){if(a.sel.shift||a.sel.extend){var e=a.sel.anchor;if(c){var f=H(b,e);if(f!=H(c,e)){e=b;b=c}else if(f!=H(b,c))b=c}oa(a,e,b,d)}else oa(a,b,c||b,d);if(a.cm)a.cm.curOp.userSelChange=true}function oa(a,b,c,d,e){if(!e&&ka(a,"beforeSelectionChange")||a.cm&&ka(a.cm,"beforeSelectionChange")){b={anchor:b,head:c};O(a,"beforeSelectionChange",a,b);a.cm&&O(a.cm,"beforeSelectionChange",a.cm,b);b.anchor=z(a,b.anchor);b.head=z(a,b.head);
c=b.head;b=b.anchor}var f=a.sel;f.goalColumn=null;if(e||!G(b,f.anchor))b=Nb(a,b,d,e!="push");if(e||!G(c,f.head))c=Nb(a,c,d,e!="push");if(!(G(f.anchor,b)&&G(f.head,c))){f.anchor=b;f.head=c;d=H(c,b);f.from=d?c:b;f.to=d?b:c;if(a.cm)a.cm.curOp.updateInput=a.cm.curOp.selectionChanged=a.cm.curOp.cursorActivity=true;T(a,"cursorActivity",a)}}function Gd(a){oa(a.doc,a.doc.sel.from,a.doc.sel.to,null,"push")}function Nb(a,b,c,d){var e=false,f=b,g=c||1;a.cantEdit=false;a:for(;;){var i=x(a,f.line);if(i.markedSpans)for(var h=
0;h<i.markedSpans.length;++h){var j=i.markedSpans[h],k=j.marker;if((j.from==null||(k.inclusiveLeft?j.from<=f.ch:j.from<f.ch))&&(j.to==null||(k.inclusiveRight?j.to>=f.ch:j.to>f.ch))){if(d){O(k,"beforeCursorEnter");if(k.explicitlyCleared)if(i.markedSpans){--h;continue}else break}if(k.atomic){h=k.find()[g<0?"from":"to"];if(G(h,f)){h.ch+=g;if(h.ch<0)h=h.line>a.first?z(a,s(h.line-1)):null;else if(h.ch>i.text.length)h=h.line<a.first+a.size-1?s(h.line+1,0):null;if(!h){if(e){if(!d)return Nb(a,b,c,true);a.cantEdit=
true;return s(a.first,0)}e=true;h=b;g=-g}}f=h;continue a}}}return f}}function jd(a,b,c){if(c==null)c=0;for(;;){var d=false,e=da(a,b),f=Fb(a,e.left,e.top-c,e.left,e.bottom+c),g=a.doc.scrollTop,i=a.doc.scrollLeft;if(f.scrollTop!=null){ib(a,f.scrollTop);if(Math.abs(a.doc.scrollTop-g)>1)d=true}if(f.scrollLeft!=null){La(a,f.scrollLeft);if(Math.abs(a.doc.scrollLeft-i)>1)d=true}if(!d)return e}}function Fb(a,b,c,d,e){var f=a.display,g=Ca(a.display);if(c<0)c=0;var i=f.scroller.clientHeight-Aa,h=f.scroller.scrollTop,
j={};a=a.doc.height+(f.mover.offsetHeight-f.lineSpace.offsetHeight);var k=c<g;g=e>a-g;if(c<h)j.scrollTop=k?0:c;else if(e>h+i){c=Math.min(c,(g?a:e)-i);if(c!=h)j.scrollTop=c}h=f.scroller.clientWidth-Aa;c=f.scroller.scrollLeft;b+=f.gutters.offsetWidth;d+=f.gutters.offsetWidth;f=f.gutters.offsetWidth;e=b<f+10;if(b<c+f||e){if(e)b=0;j.scrollLeft=Math.max(0,b-10-f)}else if(d>h+c-3)j.scrollLeft=d+10-h;return j}function Ob(a,b,c){a.curOp.updateScrollPos={scrollLeft:b==null?a.doc.scrollLeft:b,scrollTop:c==
null?a.doc.scrollTop:c}}function Mc(a,b,c){var d=a.curOp.updateScrollPos||(a.curOp.updateScrollPos={scrollLeft:a.doc.scrollLeft,scrollTop:a.doc.scrollTop});a=a.display.scroller;d.scrollTop=Math.max(0,Math.min(a.scrollHeight-a.clientHeight,d.scrollTop+c));d.scrollLeft=Math.max(0,Math.min(a.scrollWidth-a.clientWidth,d.scrollLeft+b))}function Lb(a,b,c,d){var e=a.doc;if(c==null)c="add";if(c=="smart")if(a.doc.mode.indent)var f=$a(a,b);else c="prev";var g=a.options.tabSize,i=x(e,b),h=Ha(i.text,null,g),
j=i.text.match(/^\s*/)[0],k;if(c=="smart"){k=a.doc.mode.indent(f,i.text.slice(j.length),i.text);if(k==sd){if(!d)return;c="prev"}}if(c=="prev")k=b>e.first?Ha(x(e,b-1).text,null,g):0;else if(c=="add")k=h+a.options.indentUnit;else if(c=="subtract")k=h-a.options.indentUnit;else if(typeof c=="number")k=h+c;k=Math.max(0,k);c="";d=0;if(a.options.indentWithTabs)for(e=Math.floor(k/g);e;--e){d+=g;c+="\t"}if(d<k)c+=Hd(k-d);c!=j&&pa(a.doc,c,s(b,0),s(b,j.length),"+input");i.stateAfter=null}function Pb(a,b,c){var d=
b,e=b,f=a.doc;if(typeof b=="number")e=x(f,Math.max(f.first,Math.min(b,f.first+f.size-1)));else d=W(b);if(d==null)return null;if(c(e,d))L(a,d,d+1);else return null;return e}function Nc(a,b,c,d,e){function f(m){var t=(e?uc:Id)(h,i,c,true);if(t==null){if(m=!m){m=g+c;if(m<a.first||m>=a.first+a.size)m=j=false;else{g=m;m=h=x(a,m)}}if(m)i=e?(c<0?Db:Cb)(h):c<0?h.text.length:0;else return j=false}else i=t;return true}var g=b.line,i=b.ch;b=c;var h=x(a,g),j=true;if(d=="char")f();else if(d=="column")f(true);
else if(d=="word"||d=="group"){var k=null;d=d=="group";for(var l=true;;l=false){if(c<0&&!f(!l))break;var n=h.text.charAt(i)||"\n";n=lb(n)?"w":!d?null:/\s/.test(n)?null:"p";if(k&&k!=n){if(c<0){c=1;f()}break}if(n)k=n;if(c>0&&!f(!l))break}}b=Nb(a,s(g,i),b,true);if(!j)b.hitSide=true;return b}function Jd(a,b,c,d){var e=a.doc,f=b.left,g;if(d=="page")g=b.top+c*(Math.min(a.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight)-(c<0?1.5:0.5)*Ca(a.display));else if(d=="line")g=
c>0?b.bottom+3:b.top-3;for(;;){var i=tc(a,f,g);if(!i.outside)break;if(c<0?g<=0:g>=e.height){i.hitSide=true;break}g+=c*5}return i}function yc(a,b){var c=b.ch,d=b.ch;if(a){if((b.xRel<0||d==a.length)&&c)--c;else++d;var e=a.charAt(c);for(e=lb(e)?lb:/\s/.test(e)?function(f){return/\s/.test(f)}:function(f){return!/\s/.test(f)&&!lb(f)};c>0&&e(a.charAt(c-1));)--c;for(;d<a.length&&e(a.charAt(d));)++d}return{from:s(b.line,c),to:s(b.line,d)}}function xe(a,b){P(a.doc,s(b,0),z(a.doc,s(b+1,0)))}function C(a,b,
c,d){q.defaults[a]=b;if(c)za[a]=d?function(e,f,g){g!=Xc&&c(e,f,g)}:c}function Ga(a,b){if(b===true)return b;if(a.copyState)return a.copyState(b);var c={},d;for(d in b){var e=b[d];if(e instanceof Array)e=e.concat([]);c[d]=e}return c}function gd(a,b,c){return a.startState?a.startState(b,c):true}function Cc(a){return typeof a=="string"?ha[a]:a}function jb(a,b,c){function d(g){g=Cc(g);var i=g[a];if(i===false)return"stop";if(i!=null&&c(i))return true;if(g.nofallthrough)return"stop";g=g.fallthrough;if(g==
null)return false;if(Object.prototype.toString.call(g)!="[object Array]")return d(g);i=0;for(var h=g.length;i<h;++i){var j=d(g[i]);if(j)return j}return false}for(var e=0;e<b.length;++e){var f=d(b[e]);if(f)return f!="stop"}}function wd(a){a=xa[a.keyCode];return a=="Ctrl"||a=="Alt"||a=="Shift"||a=="Mod"}function xd(a,b){if(ba&&a.keyCode==34&&a["char"])return false;var c=xa[a.keyCode];if(c==null||a.altGraphKey)return false;if(a.altKey)c="Alt-"+c;if(Kd?a.metaKey:a.ctrlKey)c="Ctrl-"+c;if(Kd?a.ctrlKey:
a.metaKey)c="Cmd-"+c;if(!b&&a.shiftKey)c="Shift-"+c;return c}function mb(a,b){this.pos=this.start=0;this.string=a;this.tabSize=b||8;this.lastColumnPos=this.lastColumnValue=0}function qa(a,b){this.lines=[];this.type=b;this.doc=a}function nb(a,b,c,d,e){if(d&&d.shared)return Ce(a,b,c,d,e);if(a.cm&&!a.cm.curOp)return A(a.cm,nb)(a,b,c,d,e);var f=new qa(a,e);if(e=="range"&&!H(b,c))return f;d&&Qb(d,f);if(f.replacedWith){f.collapsed=true;f.replacedWith=v("span",[f.replacedWith],"CodeMirror-widget");if(!d.handleMouseEvents)f.replacedWith.ignoreEvents=
true}if(f.collapsed)Ya=true;f.addToHistory&&Bd(a,{from:b,to:c,origin:"markText"},{head:a.sel.head,anchor:a.sel.anchor},NaN);var g=b.line,i=0,h,j,k=a.cm,l;a.iter(g,c.line+1,function(n){if(k&&f.collapsed&&!k.options.lineWrapping&&ia(a,n)==k.display.maxLine)l=true;var m={from:null,to:null,marker:f};i+=n.text.length;if(g==b.line){m.from=b.ch;i-=b.ch}if(g==c.line){m.to=c.ch;i-=n.text.length-c.ch}if(f.collapsed){if(g==c.line)j=Ea(n,c.ch);if(g==b.line)h=Ea(n,b.ch);else $(n,0)}n.markedSpans=n.markedSpans?
n.markedSpans.concat([m]):[m];m.marker.attachLine(n);++g});f.collapsed&&a.iter(b.line,c.line+1,function(n){sa(a,n)&&$(n,0)});f.clearOnEnter&&B(f,"beforeCursorEnter",function(){f.clear()});if(f.readOnly){Ad=true;if(a.history.done.length||a.history.undone.length)a.clearHistory()}if(f.collapsed){if(h!=j)throw Error("Inserting collapsed marker overlapping an existing one");f.size=i;f.atomic=true}if(k){if(l)k.curOp.updateMaxLine=true;if(f.className||f.title||f.startStyle||f.endStyle||f.collapsed)L(k,b.line,
c.line+1);f.atomic&&Gd(k)}return f}function ob(a,b){this.markers=a;this.primary=b;for(var c=0,d=this;c<a.length;++c){a[c].parent=this;B(a[c],"clear",function(){d.clear()})}}function Ce(a,b,c,d,e){d=Qb(d);d.shared=false;var f=[nb(a,b,c,d,e)],g=f[0],i=d.replacedWith;Oa(a,function(h){if(i)d.replacedWith=i.cloneNode(true);f.push(nb(h,z(h,b),z(h,c),d,e));for(var j=0;j<h.linked.length;++j)if(h.linked[j].isParent)return;g=S(f)});return new ob(f,g)}function pb(a,b){if(a)for(var c=0;c<a.length;++c){var d=
a[c];if(d.marker==b)return d}}function Ic(a,b){var c=Pa(a,b.from.line)&&x(a,b.from.line).markedSpans,d=Pa(a,b.to.line)&&x(a,b.to.line).markedSpans;if(!c&&!d)return null;var e=b.from.ch,f=b.to.ch,g=G(b.from,b.to);if(c)for(var i=0,h;i<c.length;++i){var j=c[i],k=j.marker;if(j.from==null||(k.inclusiveLeft?j.from<=e:j.from<e)||k.type=="bookmark"&&j.from==e&&(!g||!j.marker.insertLeft)){var l=j.to==null||(k.inclusiveRight?j.to>=e:j.to>e);(h||(h=[])).push({from:j.from,to:l?null:j.to,marker:k})}}c=h;if(d){i=
0;for(var n;i<d.length;++i){h=d[i];j=h.marker;if(h.to==null||(j.inclusiveRight?h.to>=f:h.to>f)||j.type=="bookmark"&&h.from==f&&(!g||h.marker.insertLeft)){k=h.from==null||(j.inclusiveLeft?h.from<=f:h.from<f);(n||(n=[])).push({from:k?null:h.from-f,to:h.to==null?null:h.to-f,marker:j})}}}d=n;g=b.text.length==1;n=S(b.text).length+(g?e:0);if(c)for(f=0;f<c.length;++f){i=c[f];if(i.to==null)if(h=pb(d,i.marker)){if(g)i.to=h.to==null?null:h.to+n}else i.to=e}if(d)for(f=0;f<d.length;++f){i=d[f];if(i.to!=null)i.to+=
n;if(i.from==null){h=pb(c,i.marker);if(!h){i.from=n;if(g)(c||(c=[])).push(i)}}else{i.from+=n;if(g)(c||(c=[])).push(i)}}if(g&&c){for(f=0;f<c.length;++f)c[f].from!=null&&c[f].from==c[f].to&&c[f].marker.type!="bookmark"&&c.splice(f--,1);c.length||(c=null)}e=[c];if(!g){g=b.text.length-2;var m;if(g>0&&c)for(f=0;f<c.length;++f)if(c[f].to==null)(m||(m=[])).push({from:null,to:null,marker:c[f].marker});for(f=0;f<g;++f)e.push(m);e.push(d)}return e}function Ed(a,b){var c;if(c=b["spans_"+a.id]){for(var d=0,e=
[];d<b.text.length;++d)e.push(De(c[d]));c=e}else c=null;d=Ic(a,b);if(!c)return d;if(!d)return c;for(e=0;e<c.length;++e){var f=c[e],g=d[e];if(f&&g){var i=0;a:for(;i<g.length;++i){for(var h=g[i],j=0;j<f.length;++j)if(f[j].marker==h.marker)continue a;f.push(h)}}else if(g)c[e]=g}return c}function Ae(a,b,c){var d=null;a.iter(b.line,c.line+1,function(h){if(h.markedSpans)for(var j=0;j<h.markedSpans.length;++j){var k=h.markedSpans[j].marker;if(k.readOnly&&(!d||la(d,k)==-1))(d||(d=[])).push(k)}});if(!d)return null;
a=[{from:b,to:c}];for(b=0;b<d.length;++b){c=d[b];for(var e=c.find(),f=0;f<a.length;++f){var g=a[f];if(!(H(g.to,e.from)||H(e.to,g.from))){var i=[f,1];if(H(g.from,e.from)||!c.inclusiveLeft&&G(g.from,e.from))i.push({from:g.from,to:e.from});if(H(e.to,g.to)||!c.inclusiveRight&&G(g.to,e.to))i.push({from:e.to,to:g.to});a.splice.apply(a,i);f+=i.length-1}}}return a}function Ea(a,b){var c=Ya&&a.markedSpans,d;if(c)for(var e,f=0;f<c.length;++f){e=c[f];if(e.marker.collapsed)if((e.from==null||e.from<b)&&(e.to==
null||e.to>b)&&(!d||d.width<e.marker.width))d=e.marker}return d}function wb(a){return Ea(a,a.text.length+1)}function ia(a,b){for(var c;c=Ea(b,-1);)b=x(a,c.find().from.line);return b}function sa(a,b){var c=Ya&&b.markedSpans;if(c)for(var d,e=0;e<c.length;++e){d=c[e];if(d.marker.collapsed){if(d.from==null)return true;if(!d.marker.replacedWith)if(d.from==0&&d.marker.inclusiveLeft&&Oc(a,b,d))return true}}}function Oc(a,b,c){if(c.to==null){b=c.marker.find().to;b=x(a,b.line);return Oc(a,b,pb(b.markedSpans,
c.marker))}if(c.marker.inclusiveRight&&c.to==b.text.length)return true;for(var d,e=0;e<b.markedSpans.length;++e){d=b.markedSpans[e];if(d.marker.collapsed&&!d.marker.replacedWith&&d.from==c.to&&(d.marker.inclusiveLeft||c.marker.inclusiveRight)&&Oc(a,b,d))return true}}function Ld(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c)b[c].marker.detachLine(a);a.markedSpans=null}}function Md(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.attachLine(a);a.markedSpans=b}}function Nd(a){return function(){var b=
!this.cm.curOp;b&&Ja(this.cm);try{var c=a.apply(this,arguments)}finally{b&&Ka(this.cm)}return c}}function Ab(a){if(a.height!=null)return a.height;if(!a.node.parentNode||a.node.parentNode.nodeType!=1)fa(a.cm.display.measure,v("div",[a.node],null,"position: relative"));return a.height=a.node.offsetHeight}function Ee(a,b,c,d){var e=new Rb(a,c,d);if(e.noHScroll)a.display.alignWidgets=true;Pb(a,b,function(f){var g=f.widgets||(f.widgets=[]);e.insertAt==null?g.push(e):g.splice(Math.min(g.length-1,Math.max(0,
e.insertAt)),0,e);e.line=f;if(!sa(a.doc,f)||e.showIfHidden){g=Za(a,f)<a.doc.scrollTop;$(f,f.height+Ab(e));g&&Mc(a,0,e.height)}return true});return e}function Od(a,b,c,d,e){var f=c.flattenSpans;if(f==null)f=a.options.flattenSpans;var g=0,i=null,h=new mb(b,a.options.tabSize),j;for(b==""&&c.blankLine&&c.blankLine(d);!h.eol();){if(h.pos>a.options.maxHighlightLength){f=false;h.pos=Math.min(b.length,h.start+5E4);j=null}else j=c.token(h,d);if(!f||i!=j){g<h.start&&e(h.start,i);g=h.start;i=j}h.start=h.pos}g<
h.pos&&e(h.pos,i)}function ed(a,b,c){var d=[a.state.modeGen];Od(a,b.text,a.doc.mode,c,function(i,h){d.push(i,h)});for(c=0;c<a.state.overlays.length;++c){var e=a.state.overlays[c],f=1,g=0;Od(a,b.text,e.mode,true,function(i,h){for(var j=f;g<i;){var k=d[f];k>i&&d.splice(f,1,i,d[f+1],k);f+=2;g=Math.min(i,k)}if(h)if(e.opaque){d.splice(j,f-j,i,h);f=j+2}else for(;j<f;j+=2){k=d[j+1];d[j+1]=k?k+" "+h:h}})}return d}function Pd(a,b){if(!b.styles||b.styles[0]!=a.state.modeGen)b.styles=ed(a,b,b.stateAfter=$a(a,
W(b)));return b.styles}function fd(a,b,c){var d=a.doc.mode,e=new mb(b.text,a.options.tabSize);for(b.text==""&&d.blankLine&&d.blankLine(c);!e.eol()&&e.pos<=a.options.maxHighlightLength;){d.token(e,c);e.start=e.pos}}function Qd(a){if(!a)return null;return Rd[a]||(Rd[a]="cm-"+a.replace(/ +/g," cm-"))}function mc(a,b,c,d){for(var e,f=b,g=true;e=Ea(f,-1);)f=x(a.doc,e.find().from.line);d={pre:v("pre"),col:0,pos:0,measure:null,measuredSomething:false,cm:a,copyWidgets:d};if(f.textClass)d.pre.className=f.textClass;
do{if(f.text)g=false;d.measure=f==b&&c;d.pos=0;d.addToken=d.measure?Fe:Sd;if((J||V)&&a.getOption("lineWrapping"))d.addToken=Ge(d.addToken);a:{e=d;var i=Pd(a,f),h=f.markedSpans,j=f.text,k=0;if(h){var l=j.length,n=0;aa=1;for(var m="",t=void 0,p=0,w=void 0,r=void 0,u=void 0,D=void 0,o=void 0;;){if(p==n){w=r=u=D="";o=null;p=Infinity;for(var y=null,E=0;E<h.length;++E){var F=h[E],K=F.marker;if(F.from<=n&&(F.to==null||F.to>n)){if(F.to!=null&&p>F.to){p=F.to;r=""}if(K.className)w+=" "+K.className;if(K.startStyle&&
F.from==n)u+=" "+K.startStyle;if(K.endStyle&&F.to==p)r+=" "+K.endStyle;if(K.title&&!D)D=K.title;if(K.collapsed&&(!o||o.marker.size<K.size))o=F}else if(F.from>n&&p>F.from)p=F.from;if(K.type=="bookmark"&&F.from==n&&K.replacedWith)y=K}if(o&&(o.from||0)==n){Td(e,(o.to==null?l:o.to)-n,o.marker,o.from==null);if(o.to==null){e=o.marker.find();break a}}y&&!o&&Td(e,0,y)}if(n>=l)break;for(y=Math.min(l,p);;){if(m){E=n+m.length;if(!o){F=E>y?m.slice(0,y-n):m;e.addToken(e,F,t?t+w:w,u,n+F.length==p?r:"",D)}if(E>=
y){m=m.slice(y-n);n=y;break}n=E;u=""}m=j.slice(k,k=i[aa++]);t=Qd(i[aa++])}}}else for(var aa=1;aa<i.length;aa+=2)e.addToken(e,j.slice(k,k=i[aa]),Qd(i[aa+1]));e=void 0}if(c&&f==b&&!d.measuredSomething){c[0]=d.pre.appendChild(ab(a.display.measure));d.measuredSomething=true}if(e)f=x(a.doc,e.to.line)}while(e);if(c&&!d.measuredSomething&&!c[0])c[0]=d.pre.appendChild(g?v("span","\u00a0"):ab(a.display.measure));!d.pre.firstChild&&!sa(a.doc,b)&&d.pre.appendChild(document.createTextNode("\u00a0"));var M;if(c&&
J&&(M=ea(f))){g=M.length-1;M[g].from==M[g].to&&--g;f=M[g];M=M[g-1];if(f.from+1==f.to&&M&&f.level<M.level)if(c=c[d.pos-1])c.parentNode.insertBefore(c.measureRight=ab(a.display.measure),c.nextSibling)}O(a,"renderLine",a,b,d.pre);return d.pre}function Sd(a,b,c,d,e,f){if(b){if(Pc.test(b)){j=document.createDocumentFragment();for(var g=0;;){Pc.lastIndex=g;var i=Pc.exec(b),h=i?i.index-g:b.length-g;if(h){j.appendChild(document.createTextNode(b.slice(g,g+h)));a.col+=h}if(!i)break;g+=h+1;if(i[0]=="\t"){i=a.cm.options.tabSize;
i=i-a.col%i;j.appendChild(v("span",Hd(i),"cm-tab"));a.col+=i}else{h=v("span","\u2022","cm-invalidchar");h.title="\\u"+i[0].charCodeAt(0).toString(16);j.appendChild(h);a.col+=1}}}else{a.col+=b.length;var j=document.createTextNode(b)}if(c||d||e||a.measure){b=c||"";if(d)b+=d;if(e)b+=e;h=v("span",[j],b);if(f)h.title=f;return a.pre.appendChild(h)}a.pre.appendChild(j)}}function Fe(a,b,c,d,e){for(var f=a.cm.options.lineWrapping,g=0;g<b.length;++g){var i=b.charAt(g),h=g==0;if(i>="\ud800"&&i<"\udbff"&&g<b.length-
1){i=b.slice(g,g+2);++g}else g&&f&&Sb(b,g)&&a.pre.appendChild(v("wbr"));var j=a.measure[a.pos];h=a.measure[a.pos]=Sd(a,i,c,h&&d,g==b.length-1&&e);if(j)h.leftSide=j.leftSide||j;if(J&&f&&i==" "&&g&&!/\s/.test(b.charAt(g-1))&&g<b.length-1&&!/\s/.test(b.charAt(g+1)))h.style.whiteSpace="normal";a.pos+=i.length}if(b.length)a.measuredSomething=true}function Ge(a){function b(c){for(var d=" ",e=0;e<c.length-2;++e)d+=e%2?" ":"\u00a0";d+=" ";return d}return function(c,d,e,f,g,i){return a(c,d.replace(/ {3,}/,
b),e,f,g,i)}}function Td(a,b,c,d){if(d=!d&&c.replacedWith){if(a.copyWidgets)d=d.cloneNode(true);a.pre.appendChild(d);if(a.measure){if(b)a.measure[a.pos]=d;else{var e=a.measure[a.pos]=ab(a.cm.display.measure);c.type!="bookmark"||c.insertLeft?a.pre.insertBefore(e,d):a.pre.appendChild(e)}a.measuredSomething=true}}a.pos+=b}function Lc(a,b,c,d,e){function f(u){return c?c[u]:null}function g(u,D,o){var y=e;u.text=D;if(u.stateAfter)u.stateAfter=null;if(u.styles)u.styles=null;if(u.order!=null)u.order=null;
Ld(u);Md(u,o);D=y?y(u):1;D!=u.height&&$(u,D);T(u,"change",u,b)}var i=b.from,h=b.to,j=b.text,k=x(a,i.line),l=x(a,h.line),n=S(j),m=f(j.length-1),t=h.line-i.line;if(i.ch==0&&h.ch==0&&n==""){for(var p=0,w=j.length-1,r=[];p<w;++p)r.push(new Qa(j[p],f(p),e));g(l,l.text,m);t&&a.remove(i.line,t);r.length&&a.insert(i.line,r)}else if(k==l)if(j.length==1)g(k,k.text.slice(0,i.ch)+n+k.text.slice(h.ch),m);else{r=[];p=1;for(w=j.length-1;p<w;++p)r.push(new Qa(j[p],f(p),e));r.push(new Qa(n+k.text.slice(h.ch),m,e));
g(k,k.text.slice(0,i.ch)+j[0],f(0));a.insert(i.line+1,r)}else if(j.length==1){g(k,k.text.slice(0,i.ch)+j[0]+l.text.slice(h.ch),f(0));a.remove(i.line+1,t)}else{g(k,k.text.slice(0,i.ch)+j[0],f(0));g(l,n+l.text.slice(h.ch),m);p=1;w=j.length-1;for(r=[];p<w;++p)r.push(new Qa(j[p],f(p),e));t>1&&a.remove(i.line+1,t-1);a.insert(i.line+1,r)}T(a,"change",a,b);oa(a,d.anchor,d.head,null,true)}function Tb(a){this.lines=a;this.parent=null;for(var b=0,c=a.length,d=0;b<c;++b){a[b].parent=this;d+=a[b].height}this.height=
d}function qb(a){this.children=a;for(var b=0,c=0,d=0,e=a.length;d<e;++d){var f=a[d];b+=f.chunkSize();c+=f.height;f.parent=this}this.size=b;this.height=c;this.parent=null}function Oa(a,b,c){function d(e,f,g){if(e.linked)for(var i=0;i<e.linked.length;++i){var h=e.linked[i];if(h.doc!=f){var j=g&&h.sharedHist;if(!(c&&!j)){b(h.doc,j);d(h.doc,e,j)}}}}d(a,null,true)}function Wc(a,b){if(b.cm)throw Error("This document is already in use.");a.doc=b;b.cm=a;$c(a);Ta(a);a.options.lineWrapping||gc(a);a.options.mode=
b.modeOption;L(a)}function x(a,b){for(b-=a.first;!a.lines;)for(var c=0;;++c){var d=a.children[c],e=d.chunkSize();if(b<e){a=d;break}b-=e}return a.lines[b]}function Kc(a,b,c){var d=[],e=b.line;a.iter(b.line,c.line+1,function(f){f=f.text;if(e==c.line)f=f.slice(0,c.ch);if(e==b.line)f=f.slice(b.ch);d.push(f);++e});return d}function Qc(a,b,c){var d=[];a.iter(b,c,function(e){d.push(e.text)});return d}function $(a,b){for(var c=b-a.height,d=a;d;d=d.parent)d.height+=c}function W(a){if(a.parent==null)return null;
var b=a.parent;a=la(b.lines,a);for(var c=b.parent;c;b=c,c=c.parent)for(var d=0;;++d){if(c.children[d]==b)break;a+=c.children[d].chunkSize()}return a+b.first}function Xa(a,b){var c=a.first;a:do{for(var d=0,e=a.children.length;d<e;++d){var f=a.children[d],g=f.height;if(b<g){a=f;continue a}b-=g;c+=f.chunkSize()}return c}while(!a.lines);d=0;for(e=a.lines.length;d<e;++d){f=a.lines[d].height;if(b<f)break;b-=f}return c+d}function Za(a,b){b=ia(a.doc,b);for(var c=0,d=b.parent,e=0;e<d.lines.length;++e){var f=
d.lines[e];if(f==b)break;else c+=f.height}for(f=d.parent;f;d=f,f=d.parent)for(e=0;e<f.children.length;++e){var g=f.children[e];if(g==d)break;else c+=g.height}return c}function ea(a){var b=a.order;if(b==null)b=a.order=He(a.text);return b}function Ub(a){return{done:[],undone:[],undoDepth:Infinity,lastTime:0,lastOp:null,lastOrigin:null,generation:a||1,maxGeneration:a||1}}function Ud(a,b,c,d){var e=b["spans_"+a.id],f=0;a.iter(Math.max(a.first,c),Math.min(a.first+a.size,d),function(g){if(g.markedSpans)(e||
(e=b["spans_"+a.id]={}))[f]=g.markedSpans;++f})}function Jc(a,b){var c={from:{line:b.from.line,ch:b.from.ch},to:Gc(b),text:Kc(a,b.from,b.to)};Ud(a,c,b.from.line,b.to.line+1);Oa(a,function(d){Ud(d,c,b.from.line,b.to.line+1)},true);return c}function Bd(a,b,c,d){var e=a.history;e.undone.length=0;var f=+new Date,g=S(e.done);if(g&&(e.lastOp==d||e.lastOrigin==b.origin&&b.origin&&(b.origin.charAt(0)=="+"&&a.cm&&e.lastTime>f-a.cm.options.historyEventDelay||b.origin.charAt(0)=="*"))){var i=S(g.changes);if(G(b.from,
b.to)&&G(b.from,i.to))i.to=Gc(b);else g.changes.push(Jc(a,b));g.anchorAfter=c.anchor;g.headAfter=c.head}else{g={changes:[Jc(a,b)],generation:e.generation,anchorBefore:a.sel.anchor,headBefore:a.sel.head,anchorAfter:c.anchor,headAfter:c.head};e.done.push(g);for(e.generation=++e.maxGeneration;e.done.length>e.undoDepth;)e.done.shift()}e.lastTime=f;e.lastOp=d;e.lastOrigin=b.origin}function De(a){if(!a)return null;for(var b=0,c;b<a.length;++b)if(a[b].marker.explicitlyCleared)c||(c=a.slice(0,b));else c&&
c.push(a[b]);return!c?a:c.length?c:null}function Vb(a,b){for(var c=0,d=[];c<a.length;++c){var e=a[c],f=e.changes,g=[];d.push({changes:g,anchorBefore:e.anchorBefore,headBefore:e.headBefore,anchorAfter:e.anchorAfter,headAfter:e.headAfter});for(e=0;e<f.length;++e){var i=f[e],h;g.push({from:i.from,to:i.to,text:i.text});if(b)for(var j in i)if(h=j.match(/^spans_(\d+)$/))if(la(b,Number(h[1]))>-1){S(g)[j]=i[j];delete i[j]}}}return d}function Wb(a,b,c,d){if(c<a.line)a.line+=d;else if(b<a.line){a.line=b;a.ch=
0}}function Vd(a,b,c,d){for(var e=0;e<a.length;++e){for(var f=a[e],g=true,i=0;i<f.changes.length;++i){var h=f.changes[i];if(!f.copied){h.from=wa(h.from);h.to=wa(h.to)}if(c<h.from.line){h.from.line+=d;h.to.line+=d}else if(b<=h.to.line){g=false;break}}if(!f.copied){f.anchorBefore=wa(f.anchorBefore);f.headBefore=wa(f.headBefore);f.anchorAfter=wa(f.anchorAfter);f.readAfter=wa(f.headAfter);f.copied=true}if(g){Wb(f.anchorBefore);Wb(f.headBefore);Wb(f.anchorAfter);Wb(f.headAfter)}else{a.splice(0,e+1);e=
0}}}function Cd(a,b){var c=b.from.line,d=b.to.line,e=b.text.length-(d-c)-1;Vd(a.done,c,d,e);Vd(a.undone,c,d,e)}function Ie(){gb(this)}function fb(a){if(!a.stop)a.stop=Ie;return a}function N(a){if(a.preventDefault)a.preventDefault();else a.returnValue=false}function Wd(a){if(a.stopPropagation)a.stopPropagation();else a.cancelBubble=true}function gb(a){N(a);Wd(a)}function rd(a){var b=a.which;if(b==null)if(a.button&1)b=1;else if(a.button&2)b=3;else if(a.button&4)b=2;if(Fa&&a.ctrlKey&&b==1)b=3;return b}
function B(a,b,c){if(a.addEventListener)a.addEventListener(b,c,false);else if(a.attachEvent)a.attachEvent("on"+b,c);else{a=a._handlers||(a._handlers={});(a[b]||(a[b]=[])).push(c)}}function ja(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,false);else if(a.detachEvent)a.detachEvent("on"+b,c);else if(a=a._handlers&&a._handlers[b])for(b=0;b<a.length;++b)if(a[b]==c){a.splice(b,1);break}}function O(a,b){var c=a._handlers&&a._handlers[b];if(c)for(var d=Array.prototype.slice.call(arguments,2),
e=0;e<c.length;++e)c[e].apply(null,d)}function T(a,b){function c(g){return function(){g.apply(null,e)}}var d=a._handlers&&a._handlers[b];if(d){var e=Array.prototype.slice.call(arguments,2);if(!na){++Eb;na=[];setTimeout(Je,0)}for(var f=0;f<d.length;++f)na.push(c(d[f]))}}function ga(a,b,c){O(a,c||b.type,a,b);return(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue==false)||b.codemirrorIgnore}function Je(){--Eb;var a=na;na=null;for(var b=0;b<a.length;++b)a[b]()}function ka(a,b){var c=a._handlers&&
a._handlers[b];return c&&c.length>0}function Ra(a){a.prototype.on=function(b,c){B(this,b,c)};a.prototype.off=function(b,c){ja(this,b,c)}}function bc(){this.id=null}function Ha(a,b,c,d,e){if(b==null){b=a.search(/[^\s\u00a0]/);if(b==-1)b=a.length}d=d||0;for(e=e||0;d<b;++d)if(a.charAt(d)=="\t")e+=c-e%c;else++e;return e}function Hd(a){for(;Xb.length<=a;)Xb.push(S(Xb)+" ");return Xb[a]}function S(a){return a[a.length-1]}function ld(a){if(Sa){a.selectionStart=0;a.selectionEnd=a.value.length}else try{a.select()}catch(b){}}
function la(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;c<d;++c)if(a[c]==b)return c;return-1}function Xd(a,b){function c(){}c.prototype=a;var d=new c;b&&Qb(b,d);return d}function Qb(a,b){b||(b={});for(var c in a)if(a.hasOwnProperty(c))b[c]=a[c];return b}function hd(a){for(var b=[],c=0;c<a;++c)b.push(undefined);return b}function Z(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}function lb(a){return/\w/.test(a)||a>"\u0080"&&(a.toUpperCase()!=
a.toLowerCase()||Ke.test(a))}function Yd(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b])return false;return true}function v(a,b,c,d){a=document.createElement(a);if(c)a.className=c;if(d)a.style.cssText=d;if(typeof b=="string")cd(a,b);else if(b)for(c=0;c<b.length;++c)a.appendChild(b[c]);return a}function ub(a){for(var b=a.childNodes.length;b>0;--b)a.removeChild(a.firstChild);return a}function fa(a,b){return ub(a).appendChild(b)}function cd(a,b){if(Y){a.innerHTML="";a.appendChild(document.createTextNode(b))}else a.textContent=
b}function I(a){return a.getBoundingClientRect()}function Sb(){return false}function Wa(a){if(eb!=null)return eb;var b=v("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");fa(a,b);if(b.offsetWidth)eb=b.offsetHeight-b.clientHeight;return eb||0}function ab(a){if(Rc==null){var b=v("span","\u200b");fa(a,v("span",[b,document.createTextNode("x")]));if(a.firstChild.offsetHeight!=0)Rc=b.offsetWidth<=1&&b.offsetHeight>2&&!Ba}return Rc?v("span","\u200b"):v("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px")}
function le(a,b,c,d){if(!a)return d(b,c,"ltr");for(var e=false,f=0;f<a.length;++f){var g=a[f];if(g.from<c&&g.to>b||b==c&&g.to==b){d(Math.max(g.from,b),Math.min(g.to,c),g.level==1?"rtl":"ltr");e=true}}e||d(b,c,"ltr")}function rc(a){return a.level%2?a.from:a.to}function Cb(a){return(a=ea(a))?a[0].level%2?a[0].to:a[0].from:0}function Db(a){var b=ea(a);if(!b)return a.text.length;return rc(S(b))}function Zd(a,b){var c=x(a.doc,b),d=ia(a.doc,c);if(d!=c)b=W(d);c=ea(d);d=!c?0:c[0].level%2?Db(d):Cb(d);return s(b,
d)}function Le(a,b){for(var c,d;c=wb(d=x(a.doc,b));)b=c.find().to.line;c=ea(d);d=!c?d.text.length:c[0].level%2?Cb(d):Db(d);return s(b,d)}function sc(a,b){for(var c=0,d;c<a.length;++c){var e=a[c];if(e.from<b&&e.to>b){Ia=null;return c}if(e.from==b||e.to==b)if(d==null)d=c;else{e=e.level;var f=a[d].level,g=a[0].level;e=e==g?true:f==g?false:e<f;if(e){Ia=d;return c}else{Ia=c;return d}}}Ia=null;return d}function Sc(a,b,c,d){if(!d)return b+c;do b+=c;while(b>0&&vc.test(a.text.charAt(b)));return b}function uc(a,
b,c,d){var e=ea(a);if(!e)return Id(a,b,c,d);var f=sc(e,b),g=e[f];for(b=Sc(a,b,g.level%2?-c:c,d);;){if(b>g.from&&b<g.to)return b;if(b==g.from||b==g.to){if(sc(e,b)==f)return b;g=e[f+c];return c>0==g.level%2?g.to:g.from}else{g=e[f+=c];if(!g)return null;b=c>0==g.level%2?Sc(a,g.to,-1,d):Sc(a,g.from,1,d)}}}function Id(a,b,c,d){b=b+c;if(d)for(;b>0&&vc.test(a.text.charAt(b));)b+=c;return b<0||b>a.text.length?null:b}var Na=/gecko\/\d/i.test(navigator.userAgent),J=/MSIE \d/.test(navigator.userAgent),Ba=J&&
(document.documentMode==null||document.documentMode<8),Y=J&&(document.documentMode==null||document.documentMode<9),V=/WebKit\//.test(navigator.userAgent),Tc=V&&/Qt\/\d+\.\d+/.test(navigator.userAgent),Me=/Chrome\//.test(navigator.userAgent),ba=/Opera\//.test(navigator.userAgent),Ac=/Apple Computer/.test(navigator.vendor),ec=/KHTML\//.test(navigator.userAgent),ce=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),de=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),se=/PhantomJS/.test(navigator.userAgent),
Sa=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),ac=Sa||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),Fa=Sa||/Mac/.test(navigator.platform),Ne=/windows/i.test(navigator.platform),ya=ba&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);if(ya)ya=Number(ya[1]);if(ya&&ya>=15){ba=false;V=true}var Kd=Fa&&(Tc||ba&&(ya==null||ya<12.11)),zc=Na||J&&!Y,Ad=false,Ya=false,ta,re=0,Ib,Hb,qd=0,Jb=0,ca=null;if(J)ca=-0.53;else if(Na)ca=15;else if(Me)ca=
-0.7;else if(Ac)ca=-1/3;var vd,Dc=null,Ec,Gc=q.changeEnd=function(a){if(!a.text)return a.to;return s(a.from.line+a.text.length-1,S(a.text).length+(a.text.length==1?a.from.ch:0))};q.Pos=s;q.prototype={constructor:q,focus:function(){window.focus();U(this);ra(this);cb(this)},setOption:function(a,b){var c=this.options,d=c[a];if(!(c[a]==b&&a!="mode")){c[a]=b;za.hasOwnProperty(a)&&A(this,za[a])(this,b,d)}},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,
b){this.state.keyMaps[b?"push":"unshift"](a)},removeKeyMap:function(a){for(var b=this.state.keyMaps,c=0;c<b.length;++c)if(b[c]==a||typeof b[c]!="string"&&b[c].name==a){b.splice(c,1);return true}},addOverlay:A(null,function(a,b){var c=a.token?a:q.getMode(this.options,a);if(c.startState)throw Error("Overlays may not be stateful.");this.state.overlays.push({mode:c,modeSpec:a,opaque:b&&b.opaque});this.state.modeGen++;L(this)}),removeOverlay:A(null,function(a){for(var b=this.state.overlays,c=0;c<b.length;++c){var d=
b[c].modeSpec;if(d==a||typeof a=="string"&&d.name==a){b.splice(c,1);this.state.modeGen++;L(this);break}}}),indentLine:A(null,function(a,b,c){if(typeof b!="string"&&typeof b!="number")b=b==null?this.options.smartIndent?"smart":"prev":b?"add":"subtract";Pa(this.doc,a)&&Lb(this,a,b,c)}),indentSelection:A(null,function(a){var b=this.doc.sel;if(G(b.from,b.to))return Lb(this,b.from.line,a);var c=b.to.line-(b.to.ch?0:1);for(b=b.from.line;b<=c;++b)Lb(this,b,a)}),getTokenAt:function(a,b){var c=this.doc;a=
z(c,a);var d=$a(this,a.line,b),e=this.doc.mode;c=x(c,a.line);for(c=new mb(c.text,this.options.tabSize);c.pos<a.ch&&!c.eol();){c.start=c.pos;var f=e.token(c,d)}return{start:c.start,end:c.pos,string:c.current(),className:f||null,type:f||null,state:d}},getTokenTypeAt:function(a){a=z(this.doc,a);var b=Pd(this,x(this.doc,a.line)),c=0,d=(b.length-1)/2;a=a.ch;if(a==0)return b[2];for(;;){var e=c+d>>1;if((e?b[e*2-1]:0)>=a)d=e;else if(b[e*2+1]<a)c=e+1;else return b[e*2+2]}},getModeAt:function(a){var b=this.doc.mode;
if(!b.innerMode)return b;return q.innerMode(b,this.getTokenAt(a).state).mode},getHelper:function(a,b){if(rb.hasOwnProperty(b)){var c=rb[b],d=this.getModeAt(a);return d[b]&&c[d[b]]||d.helperType&&c[d.helperType]||c[d.name]}},getStateAfter:function(a,b){var c=this.doc;a=Math.max(c.first,Math.min(a==null?c.first+c.size-1:a,c.first+c.size-1));return $a(this,a+1,b)},cursorCoords:function(a,b){var c;c=this.doc.sel;c=a==null?c.head:typeof a=="object"?z(this.doc,a):a?c.from:c.to;return da(this,c,b||"page")},
charCoords:function(a,b){return yb(this,z(this.doc,a),b||"page")},coordsChar:function(a,b){a=id(this,a,b||"page");return tc(this,a.left,a.top)},lineAtHeight:function(a,b){a=id(this,{top:a,left:0},b||"page").top;return Xa(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,b){var c=false,d=this.doc.first+this.doc.size-1;if(a<this.doc.first)a=this.doc.first;else if(a>d){a=d;c=true}d=x(this.doc,a);return qc(this,x(this.doc,a),{top:0,left:0},b||"page").top+(c?d.height:0)},defaultTextHeight:function(){return Ca(this.display)},
defaultCharWidth:function(){return Zc(this.display)},setGutterMarker:A(null,function(a,b,c){return Pb(this,a,function(d){var e=d.gutterMarkers||(d.gutterMarkers={});e[b]=c;if(!c&&Yd(e))d.gutterMarkers=null;return true})}),clearGutter:A(null,function(a){var b=this,c=b.doc,d=c.first;c.iter(function(e){if(e.gutterMarkers&&e.gutterMarkers[a]){e.gutterMarkers[a]=null;L(b,d,d+1);if(Yd(e.gutterMarkers))e.gutterMarkers=null}++d})}),addLineClass:A(null,function(a,b,c){return Pb(this,a,function(d){var e=b==
"text"?"textClass":b=="background"?"bgClass":"wrapClass";if(d[e])if(RegExp("(?:^|\\s)"+c+"(?:$|\\s)").test(d[e]))return false;else d[e]+=" "+c;else d[e]=c;return true})}),removeLineClass:A(null,function(a,b,c){return Pb(this,a,function(d){var e=b=="text"?"textClass":b=="background"?"bgClass":"wrapClass",f=d[e];if(f)if(c==null)d[e]=null;else{var g=f.match(RegExp("(?:^|\\s+)"+c+"(?:$|\\s+)"));if(!g)return false;var i=g.index+g[0].length;d[e]=f.slice(0,g.index)+(!g.index||i==f.length?"":" ")+f.slice(i)||
null}else return false;return true})}),addLineWidget:A(null,function(a,b,c){return Ee(this,a,b,c)}),removeLineWidget:function(a){a.clear()},lineInfo:function(a){if(typeof a=="number"){if(!Pa(this.doc,a))return null;var b=a;a=x(this.doc,a);if(!a)return null}else{b=W(a);if(b==null)return null}return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},
addWidget:function(a,b,c,d,e){var f=this.display;a=da(this,z(this.doc,a));var g=a.bottom,i=a.left;b.style.position="absolute";f.sizer.appendChild(b);if(d=="over")g=a.top;else if(d=="above"||d=="near"){var h=Math.max(f.wrapper.clientHeight,this.doc.height),j=Math.max(f.sizer.clientWidth,f.lineSpace.clientWidth);if((d=="above"||a.bottom+b.offsetHeight>h)&&a.top>b.offsetHeight)g=a.top-b.offsetHeight;else if(a.bottom+b.offsetHeight<=h)g=a.bottom;if(i+b.offsetWidth>j)i=j-b.offsetWidth}b.style.top=g+"px";
b.style.left=b.style.right="";if(e=="right"){i=f.sizer.clientWidth-b.offsetWidth;b.style.right="0px"}else{if(e=="left")i=0;else if(e=="middle")i=(f.sizer.clientWidth-b.offsetWidth)/2;b.style.left=i+"px"}if(c){a=Fb(this,i,g,i+b.offsetWidth,g+b.offsetHeight);a.scrollTop!=null&&ib(this,a.scrollTop);a.scrollLeft!=null&&La(this,a.scrollLeft)}},triggerOnKeyDown:A(null,pd),execCommand:function(a){return Bc[a](this)},findPosH:function(a,b,c,d){var e=1;if(b<0){e=-1;b=-b}var f=0;for(a=z(this.doc,a);f<b;++f){a=
Nc(this.doc,a,e,c,d);if(a.hitSide)break}return a},moveH:A(null,function(a,b){var c=this.doc.sel;c=c.shift||c.extend||G(c.from,c.to)?Nc(this.doc,c.head,a,b,this.options.rtlMoveVisually):a<0?c.from:c.to;P(this.doc,c,c,a)}),deleteH:A(null,function(a,b){var c=this.doc.sel;G(c.from,c.to)?pa(this.doc,"",c.from,Nc(this.doc,c.head,a,b,false),"+delete"):pa(this.doc,"",c.from,c.to,"+delete");this.curOp.userSelChange=true}),findPosV:function(a,b,c,d){var e=1;d=d;if(b<0){e=-1;b=-b}var f=0;for(a=z(this.doc,a);f<
b;++f){a=da(this,a,"div");if(d==null)d=a.left;else a.left=d;a=Jd(this,a,e,c);if(a.hitSide)break}return a},moveV:A(null,function(a,b){var c=this.doc.sel,d=da(this,c.head,"div");if(c.goalColumn!=null)d.left=c.goalColumn;var e=Jd(this,d,a,b);b=="page"&&Mc(this,0,yb(this,e,"div").top-d.top);P(this.doc,e,e,a);c.goalColumn=d.left}),toggleOverwrite:function(a){if(!(a!=null&&a==this.state.overwrite))if(this.state.overwrite=!this.state.overwrite)this.display.cursor.className+=" CodeMirror-overwrite";else this.display.cursor.className=
this.display.cursor.className.replace(" CodeMirror-overwrite","")},hasFocus:function(){return this.state.focused},scrollTo:A(null,function(a,b){Ob(this,a,b)}),getScrollInfo:function(){var a=this.display.scroller,b=Aa;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-b,width:a.scrollWidth-b,clientHeight:a.clientHeight-b,clientWidth:a.clientWidth-b}},scrollIntoView:A(null,function(a,b){if(typeof a=="number")a=s(a,0);b||(b=0);var c=a;if(!a||a.line!=null){this.curOp.scrollToPos=a?z(this.doc,
a):this.doc.sel.head;this.curOp.scrollToPosMargin=b;c=da(this,this.curOp.scrollToPos)}c=Fb(this,c.left,c.top-b,c.right,c.bottom+b);Ob(this,c.scrollLeft,c.scrollTop)}),setSize:A(null,function(a,b){function c(d){return typeof d=="number"||/^\d+$/.test(String(d))?d+"px":d}if(a!=null)this.display.wrapper.style.width=c(a);if(b!=null)this.display.wrapper.style.height=c(b);if(this.options.lineWrapping)this.display.measureLineCache.length=this.display.measureLineCachePos=0;this.curOp.forceUpdate=true}),operation:function(a){return wc(this,
a)},refresh:A(null,function(){Da(this);Ob(this,this.doc.scrollLeft,this.doc.scrollTop);L(this)}),swapDoc:A(null,function(a){var b=this.doc;b.cm=null;Wc(this,a);Da(this);ma(this,true);Ob(this,a.scrollLeft,a.scrollTop);return b}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};Ra(q);var za=q.optionHandlers={},Zb=q.defaults=
{},Xc=q.Init={toString:function(){return"CodeMirror.Init"}};C("value","",function(a,b){a.setValue(b)},true);C("mode",null,function(a,b){a.doc.modeOption=b;Ta(a)},true);C("indentUnit",2,Ta,true);C("indentWithTabs",false);C("smartIndent",true);C("tabSize",4,function(a){Ta(a);Da(a);L(a)},true);C("electricChars",true);C("rtlMoveVisually",!Ne);C("theme","default",function(a){Vc(a);Va(a)},true);C("keyMap","default",ad);C("extraKeys",null);C("onKeyEvent",null);C("onDragEvent",null);C("lineWrapping",false,
function(a){if(a.options.lineWrapping){a.display.wrapper.className+=" CodeMirror-wrap";a.display.sizer.style.minWidth=""}else{a.display.wrapper.className=a.display.wrapper.className.replace(" CodeMirror-wrap","");gc(a)}$c(a);L(a);Da(a);setTimeout(function(){hc(a)},100)},true);C("gutters",[],function(a){$b(a.options);Va(a)},true);C("fixedGutter",true,function(a,b){a.display.gutters.style.left=b?jc(a.display)+"px":"0";a.refresh()},true);C("coverGutterNextToScrollbar",false,hc,true);C("lineNumbers",
false,function(a){$b(a.options);Va(a)},true);C("firstLineNumber",1,Va,true);C("lineNumberFormatter",function(a){return a},Va,true);C("showCursorWhenSelecting",false,kc,true);C("readOnly",false,function(a,b){if(b=="nocursor"){cc(a);a.display.input.blur()}else b||ma(a,true)});C("dragDrop",true);C("cursorBlinkRate",530);C("cursorScrollMargin",0);C("cursorHeight",1);C("workTime",100);C("workDelay",100);C("flattenSpans",true);C("pollInterval",100);C("undoDepth",40,function(a,b){a.doc.history.undoDepth=
b});C("historyEventDelay",500);C("viewportMargin",10,function(a){a.refresh()},true);C("maxHighlightLength",1E4,function(a){Ta(a);a.refresh()},true);C("moveInputWithCursor",true,function(a,b){if(!b)a.display.inputDiv.style.top=a.display.inputDiv.style.left=0});C("tabindex",null,function(a,b){a.display.input.tabIndex=b||""});C("autofocus",null);var $d=q.modes={},sb=q.mimeModes={};q.defineMode=function(a,b){if(!q.defaults.mode&&a!="null")q.defaults.mode=a;if(arguments.length>2){b.dependencies=[];for(var c=
2;c<arguments.length;++c)b.dependencies.push(arguments[c])}$d[a]=b};q.defineMIME=function(a,b){sb[a]=b};q.resolveMode=function(a){if(typeof a=="string"&&sb.hasOwnProperty(a))a=sb[a];else if(a&&typeof a.name=="string"&&sb.hasOwnProperty(a.name)){var b=sb[a.name];a=Xd(b,a);a.name=b.name}else if(typeof a=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(a))return q.resolveMode("application/xml");return typeof a=="string"?{name:a}:a||{name:"null"}};q.getMode=function(a,b){b=q.resolveMode(b);var c=$d[b.name];
if(!c)return q.getMode(a,"text/plain");c=c(a,b);if(tb.hasOwnProperty(b.name)){var d=tb[b.name],e;for(e in d)if(d.hasOwnProperty(e)){if(c.hasOwnProperty(e))c["_"+e]=c[e];c[e]=d[e]}}c.name=b.name;return c};q.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}});q.defineMIME("text/plain","null");var tb=q.modeExtensions={};q.extendMode=function(a,b){var c=tb.hasOwnProperty(a)?tb[a]:tb[a]={};Qb(b,c)};q.defineExtension=function(a,b){q.prototype[a]=b};q.defineDocExtension=function(a,b){Q.prototype[a]=
b};q.defineOption=C;var dc=[];q.defineInitHook=function(a){dc.push(a)};var rb=q.helpers={};q.registerHelper=function(a,b,c){rb.hasOwnProperty(a)||(rb[a]=q[a]={});rb[a][b]=c};q.isWordChar=lb;q.copyState=Ga;q.startState=gd;q.innerMode=function(a,b){for(;a.innerMode;){var c=a.innerMode(b);if(!c||c.mode==a)break;b=c.state;a=c.mode}return c||{mode:a,state:b}};var Bc=q.commands={selectAll:function(a){a.setSelection(s(a.firstLine(),0),s(a.lastLine()))},killLine:function(a){var b=a.getCursor(true),c=a.getCursor(false),
d=!G(b,c);!d&&a.getLine(b.line).length==b.ch?a.replaceRange("",b,s(b.line+1,0),"+delete"):a.replaceRange("",b,d?c:s(b.line),"+delete")},deleteLine:function(a){var b=a.getCursor().line;a.replaceRange("",s(b,0),s(b),"+delete")},delLineLeft:function(a){var b=a.getCursor();a.replaceRange("",s(b.line,0),b,"+delete")},undo:function(a){a.undo()},redo:function(a){a.redo()},goDocStart:function(a){a.extendSelection(s(a.firstLine(),0))},goDocEnd:function(a){a.extendSelection(s(a.lastLine()))},goLineStart:function(a){a.extendSelection(Zd(a,
a.getCursor().line))},goLineStartSmart:function(a){var b=a.getCursor(),c=Zd(a,b.line),d=a.getLineHandle(c.line),e=ea(d);if(!e||e[0].level==0){d=Math.max(0,d.text.search(/\S/));a.extendSelection(s(c.line,b.line==c.line&&b.ch<=d&&b.ch?0:d))}else a.extendSelection(c)},goLineEnd:function(a){a.extendSelection(Le(a,a.getCursor().line))},goLineRight:function(a){var b=a.charCoords(a.getCursor(),"div").top+5;a.extendSelection(a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:b},"div"))},goLineLeft:function(a){var b=
a.charCoords(a.getCursor(),"div").top+5;a.extendSelection(a.coordsChar({left:0,top:b},"div"))},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goGroupRight:function(a){a.moveH(1,
"group")},goGroupLeft:function(a){a.moveH(-1,"group")},goWordRight:function(a){a.moveH(1,"word")},delCharBefore:function(a){a.deleteH(-1,"char")},delCharAfter:function(a){a.deleteH(1,"char")},delWordBefore:function(a){a.deleteH(-1,"word")},delWordAfter:function(a){a.deleteH(1,"word")},delGroupBefore:function(a){a.deleteH(-1,"group")},delGroupAfter:function(a){a.deleteH(1,"group")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},
insertTab:function(a){a.replaceSelection("\t","end","+input")},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.replaceSelection("\t","end","+input")},transposeChars:function(a){var b=a.getCursor(),c=a.getLine(b.line);b.ch>0&&b.ch<c.length-1&&a.replaceRange(c.charAt(b.ch)+c.charAt(b.ch-1),s(b.line,b.ch-1),s(b.line,b.ch+1))},newlineAndIndent:function(a){A(a,function(){a.replaceSelection("\n","end","+input");a.indentLine(a.getCursor().line,null,true)})()},toggleOverwrite:function(a){a.toggleOverwrite()}},
ha=q.keyMap={};ha.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"};ha.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd",
"Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"};ha.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd",
"Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delLineLeft",fallthrough:["basic","emacsy"]};ha["default"]=Fa?ha.macDefault:ha.pcDefault;ha.emacsy=
{"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};q.lookupKey=jb;q.isModifierKey=wd;q.keyName=xd;q.fromTextArea=function(a,b){function c(){a.value=j.getValue()}b||(b={});b.value=
a.value;if(!b.tabindex&&a.tabindex)b.tabindex=a.tabindex;if(!b.placeholder&&a.placeholder)b.placeholder=a.placeholder;if(b.autofocus==null){var d=document.body;try{d=document.activeElement}catch(e){}b.autofocus=d==a||a.getAttribute("autofocus")!=null&&d==document.body}if(a.form){B(a.form,"submit",c);if(!b.leaveSubmitMethodAlone){var f=a.form,g=f.submit;try{var i=f.submit=function(){c();f.submit=g;f.submit();f.submit=i}}catch(h){}}}a.style.display="none";var j=q(function(k){a.parentNode.insertBefore(k,
a.nextSibling)},b);j.save=c;j.getTextArea=function(){return a};j.toTextArea=function(){c();a.parentNode.removeChild(j.getWrapperElement());a.style.display="";if(a.form){ja(a.form,"submit",c);if(typeof a.form.submit=="function")a.form.submit=g}};return j};mb.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==0},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},
eat:function(a){var b=this.string.charAt(this.pos);if(typeof a=="string"?b==a:b&&(a.test?a.test(b):a(b))){++this.pos;return b}},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){a=this.string.indexOf(a,this.pos);if(a>-1){this.pos=a;return true}},backUp:function(a){this.pos-=a},column:function(){if(this.lastColumnPos<
this.start){this.lastColumnValue=Ha(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start}return this.lastColumnValue},indentation:function(){return Ha(this.string,null,this.tabSize)},match:function(a,b,c){if(typeof a=="string"){var d=this.string.substr(this.pos,a.length);if((c?d.toLowerCase():d)==(c?a.toLowerCase():a)){if(b!==false)this.pos+=a.length;return true}}else{if((a=this.string.slice(this.pos).match(a))&&a.index>0)return null;if(a&&b!==
false)this.pos+=a[0].length;return a}},current:function(){return this.string.slice(this.start,this.pos)}};q.StringStream=mb;q.TextMarker=qa;Ra(qa);qa.prototype.clear=function(){if(!this.explicitlyCleared){var a=this.doc.cm,b=a&&!a.curOp;b&&Ja(a);if(ka(this,"clear")){var c=this.find();c&&T(this,"clear",c.from,c.to)}for(var d=c=null,e=0;e<this.lines.length;++e){var f=this.lines[e],g=pb(f.markedSpans,this);if(g.to!=null)d=W(f);for(var i=f,h=f.markedSpans,j=g,k=void 0,l=0;l<h.length;++l)if(h[l]!=j)(k||
(k=[])).push(h[l]);i.markedSpans=k;if(g.from!=null)c=W(f);else this.collapsed&&!sa(this.doc,f)&&a&&$(f,Ca(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping)for(e=0;e<this.lines.length;++e){f=ia(a.doc,this.lines[e]);g=vb(a.doc,f);if(g>a.display.maxLineLength){a.display.maxLine=f;a.display.maxLineLength=g;a.display.maxLineChanged=true}}c!=null&&a&&L(a,c,d+1);this.lines.length=0;this.explicitlyCleared=true;if(this.atomic&&this.doc.cantEdit){this.doc.cantEdit=false;a&&Gd(a)}b&&Ka(a)}};qa.prototype.find=
function(){for(var a,b,c=0;c<this.lines.length;++c){var d=this.lines[c],e=pb(d.markedSpans,this);if(e.from!=null||e.to!=null){d=W(d);if(e.from!=null)a=s(d,e.from);if(e.to!=null)b=s(d,e.to)}}if(this.type=="bookmark")return a;return a&&{from:a,to:b}};qa.prototype.changed=function(){var a=this.find(),b=this.doc.cm;if(a&&b){var c=x(this.doc,a.from.line);oe(b,c);if(a.from.line>=b.display.showingFrom&&a.from.line<b.display.showingTo){for(a=b.display.lineDiv.firstChild;a;a=a.nextSibling)if(a.lineObj==c){a.offsetHeight!=
c.height&&$(c,a.offsetHeight);break}wc(b,function(){b.curOp.selectionChanged=b.curOp.forceUpdate=b.curOp.updateMaxLine=true})}}};qa.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;if(!b.maybeHiddenMarkers||la(b.maybeHiddenMarkers,this)==-1)(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)};qa.prototype.detachLine=function(a){this.lines.splice(la(this.lines,a),1);if(!this.lines.length&&this.doc.cm){a=this.doc.cm.curOp;(a.maybeHiddenMarkers||
(a.maybeHiddenMarkers=[])).push(this)}};q.SharedTextMarker=ob;Ra(ob);ob.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=true;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();T(this,"clear")}};ob.prototype.find=function(){return this.primary.find()};var Rb=q.LineWidget=function(a,b,c){if(c)for(var d in c)if(c.hasOwnProperty(d))this[d]=c[d];this.cm=a;this.node=b};Ra(Rb);Rb.prototype.clear=Nd(function(){var a=this.line.widgets,b=W(this.line);if(!(b==null||!a)){for(var c=
0;c<a.length;++c)a[c]==this&&a.splice(c--,1);if(!a.length)this.line.widgets=null;a=Za(this.cm,this.line)<this.cm.doc.scrollTop;$(this.line,Math.max(0,this.line.height-Ab(this)));a&&Mc(this.cm,0,-this.height);L(this.cm,b,b+1)}});Rb.prototype.changed=Nd(function(){var a=this.height;this.height=null;if(a=Ab(this)-a){$(this.line,this.line.height+a);a=W(this.line);L(this.cm,a,a+1)}});var Qa=q.Line=function(a,b,c){this.text=a;Md(this,b);this.height=c?c(this):1};Ra(Qa);var Rd={},Pc=/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\uFEFF]/g;
Tb.prototype={chunkSize:function(){return this.lines.length},removeInner:function(a,b){for(var c=a,d=a+b;c<d;++c){var e=this.lines[c];this.height-=e.height;var f=e;f.parent=null;Ld(f);T(e,"delete")}this.lines.splice(a,b)},collapse:function(a){a.splice.apply(a,[a.length,0].concat(this.lines))},insertInner:function(a,b,c){this.height+=c;this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));a=0;for(c=b.length;a<c;++a)b[a].parent=this},iterN:function(a,b,c){for(b=a+b;a<b;++a)if(c(this.lines[a]))return true}};
qb.prototype={chunkSize:function(){return this.size},removeInner:function(a,b){this.size-=b;for(var c=0;c<this.children.length;++c){var d=this.children[c],e=d.chunkSize();if(a<e){var f=Math.min(b,e-a),g=d.height;d.removeInner(a,f);this.height-=g-d.height;if(e==f){this.children.splice(c--,1);d.parent=null}if((b-=f)==0)break;a=0}else a-=e}if(this.size-b<25){c=[];this.collapse(c);this.children=[new Tb(c)];this.children[0].parent=this}},collapse:function(a){for(var b=0,c=this.children.length;b<c;++b)this.children[b].collapse(a)},
insertInner:function(a,b,c){this.size+=b.length;this.height+=c;for(var d=0,e=this.children.length;d<e;++d){var f=this.children[d],g=f.chunkSize();if(a<=g){f.insertInner(a,b,c);if(f.lines&&f.lines.length>50){for(;f.lines.length>50;){a=f.lines.splice(f.lines.length-25,25);a=new Tb(a);f.height-=a.height;this.children.splice(d+1,0,a);a.parent=this}this.maybeSpill()}break}a-=g}},maybeSpill:function(){if(!(this.children.length<=10)){var a=this;do{var b=a.children.splice(a.children.length-5,5);b=new qb(b);
if(a.parent){a.size-=b.size;a.height-=b.height;var c=la(a.parent.children,a);a.parent.children.splice(c+1,0,b)}else{c=new qb(a.children);c.parent=a;a.children=[c,b];a=c}b.parent=a.parent}while(a.children.length>10);a.parent.maybeSpill()}},iterN:function(a,b,c){for(var d=0,e=this.children.length;d<e;++d){var f=this.children[d],g=f.chunkSize();if(a<g){g=Math.min(b,g-a);if(f.iterN(a,g,c))return true;if((b-=g)==0)break;a=0}else a-=g}}};var Oe=0,Q=q.Doc=function(a,b,c){if(!(this instanceof Q))return new Q(a,
b,c);if(c==null)c=0;qb.call(this,[new Tb([new Qa("",null)])]);this.first=c;this.scrollTop=this.scrollLeft=0;this.cantEdit=false;this.history=Ub();this.cleanGeneration=1;this.frontier=c;c=s(c,0);this.sel={from:c,to:c,head:c,anchor:c,shift:false,extend:false,goalColumn:null};this.id=++Oe;this.modeOption=b;if(typeof a=="string")a=ua(a);Lc(this,{from:c,to:c,text:a},null,{head:c,anchor:c})};Q.prototype=Xd(qb.prototype,{constructor:Q,iter:function(a,b,c){c?this.iterN(a-this.first,b-a,c):this.iterN(this.first,
this.first+this.size,a)},insert:function(a,b){for(var c=0,d=0,e=b.length;d<e;++d)c+=b[d].height;this.insertInner(a-this.first,b,c)},remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(a){var b=Qc(this,this.first,this.first+this.size);if(a===false)return b;return b.join(a||"\n")},setValue:function(a){var b=s(this.first,0),c=this.first+this.size-1;Ma(this,{from:b,to:s(c,x(this,c).text.length),text:ua(a),origin:"setValue"},{head:b,anchor:b},true)},replaceRange:function(a,b,c,d){b=
z(this,b);c=c?z(this,c):b;pa(this,a,b,c,d)},getRange:function(a,b,c){a=Kc(this,z(this,a),z(this,b));if(c===false)return a;return a.join(c||"\n")},getLine:function(a){return(a=this.getLineHandle(a))&&a.text},setLine:function(a,b){Pa(this,a)&&pa(this,b,s(a,0),z(this,s(a)))},removeLine:function(a){a?pa(this,"",z(this,s(a-1)),z(this,s(a))):pa(this,"",s(0,0),z(this,s(1,0)))},getLineHandle:function(a){if(Pa(this,a))return x(this,a)},getLineNumber:function(a){return W(a)},getLineHandleVisualStart:function(a){if(typeof a==
"number")a=x(this,a);return ia(this,a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(a){return z(this,a)},getCursor:function(a){var b=this.sel;return wa(a==null||a=="head"?b.head:a=="anchor"?b.anchor:a=="end"||a===false?b.to:b.from)},somethingSelected:function(){return!G(this.sel.head,this.sel.anchor)},setCursor:bb(function(a,b,c){a=z(this,typeof a=="number"?s(a,b||0):a);c?P(this,a):oa(this,a,a)}),
setSelection:bb(function(a,b){oa(this,z(this,a),z(this,b||a))}),extendSelection:bb(function(a,b){P(this,z(this,a),b&&z(this,b))}),getSelection:function(a){return this.getRange(this.sel.from,this.sel.to,a)},replaceSelection:function(a,b,c){Ma(this,{from:this.sel.from,to:this.sel.to,text:ua(a),origin:c},b||"around")},undo:bb(function(){Dd(this,"undo")}),redo:bb(function(){Dd(this,"redo")}),setExtending:function(a){this.sel.extend=a},historySize:function(){var a=this.history;return{undo:a.done.length,
redo:a.undone.length}},clearHistory:function(){this.history=Ub(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration()},changeGeneration:function(){this.history.lastOp=this.history.lastOrigin=null;return this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:Vb(this.history.done),undone:Vb(this.history.undone)}},setHistory:function(a){var b=this.history=Ub(this.history.maxGeneration);
b.done=a.done.slice(0);b.undone=a.undone.slice(0)},markText:function(a,b,c){return nb(this,z(this,a),z(this,b),c,"range")},setBookmark:function(a,b){var c={replacedWith:b&&(b.nodeType==null?b.widget:b),insertLeft:b&&b.insertLeft};a=z(this,a);return nb(this,a,a,c,"bookmark")},findMarksAt:function(a){a=z(this,a);var b=[],c=x(this,a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];if((e.from==null||e.from<=a.ch)&&(e.to==null||e.to>=a.ch))b.push(e.marker.parent||e.marker)}return b},getAllMarks:function(){var a=
[];this.iter(function(b){if(b=b.markedSpans)for(var c=0;c<b.length;++c)b[c].from!=null&&a.push(b[c].marker)});return a},posFromIndex:function(a){var b,c=this.first;this.iter(function(d){d=d.text.length+1;if(d>a){b=a;return true}a-=d;++c});return z(this,s(c,b))},indexFromPos:function(a){a=z(this,a);var b=a.ch;if(a.line<this.first||a.ch<0)return 0;this.iter(this.first,a.line,function(c){b+=c.text.length+1});return b},copy:function(a){var b=new Q(Qc(this,this.first,this.first+this.size),this.modeOption,
this.first);b.scrollTop=this.scrollTop;b.scrollLeft=this.scrollLeft;b.sel={from:this.sel.from,to:this.sel.to,head:this.sel.head,anchor:this.sel.anchor,shift:this.sel.shift,extend:false,goalColumn:this.sel.goalColumn};if(a){b.history.undoDepth=this.history.undoDepth;b.setHistory(this.getHistory())}return b},linkedDoc:function(a){a||(a={});var b=this.first,c=this.first+this.size;if(a.from!=null&&a.from>b)b=a.from;if(a.to!=null&&a.to<c)c=a.to;b=new Q(Qc(this,b,c),a.mode||this.modeOption,b);if(a.sharedHist)b.history=
this.history;(this.linked||(this.linked=[])).push({doc:b,sharedHist:a.sharedHist});b.linked=[{doc:this,isParent:true,sharedHist:a.sharedHist}];return b},unlinkDoc:function(a){if(a instanceof q)a=a.doc;if(this.linked)for(var b=0;b<this.linked.length;++b)if(this.linked[b].doc==a){this.linked.splice(b,1);a.unlinkDoc(this);break}if(a.history==this.history){var c=[a.id];Oa(a,function(d){c.push(d.id)},true);a.history=Ub();a.history.done=Vb(this.history.done,c);a.history.undone=Vb(this.history.undone,c)}},
iterLinkedDocs:function(a){Oa(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm}});Q.prototype.eachLine=Q.prototype.iter;Tc="iter insert remove copy getEditor".split(" ");for(var Yb in Q.prototype)if(Q.prototype.hasOwnProperty(Yb)&&la(Tc,Yb)<0)q.prototype[Yb]=function(a){return function(){return a.apply(this.doc,arguments)}}(Q.prototype[Yb]);Ra(Q);q.e_stop=gb;q.e_preventDefault=N;q.e_stopPropagation=Wd;var na,Eb=0;q.on=B;q.off=ja;q.signal=O;var Aa=30,sd=q.Pass={toString:function(){return"CodeMirror.Pass"}};
bc.prototype={set:function(a,b){clearTimeout(this.id);this.id=setTimeout(b,a)}};q.countColumn=Ha;var Xb=[""],Ke=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,vc=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F\udc00-\udfff]/;q.replaceGetRect=function(a){I=a};var ye=function(){if(Y)return false;var a=v("div");return"draggable"in
a||"dragDrop"in a}();if(Na)Sb=function(a,b){return a.charCodeAt(b-1)==36&&a.charCodeAt(b)==39};else if(Ac&&!/Version\/([6-9]|\d\d)\b/.test(navigator.userAgent))Sb=function(a,b){return/\-[^ \-?]|\?[^ !\'\"\),.\-\/:;\?\]\}]/.test(a.slice(b-1,b+1))};else if(V&&!/Chrome\/(?:29|[3-9]\d|\d\d\d)\./.test(navigator.userAgent))Sb=function(a,b){if(b>1&&a.charCodeAt(b-1)==45){if(/\w/.test(a.charAt(b-2))&&/[^\-?\.]/.test(a.charAt(b)))return true;if(b>2&&/[\d\.,]/.test(a.charAt(b-2))&&/[\d\.,]/.test(a.charAt(b)))return false}return/[~!#%&*)=+}\]|\"\.>,:;][({[<]|-[^\-?\.\u2010-\u201f\u2026]|\?[\w~`@#$%\^&*(_=+{[|><]|\u2026[\w~`@#$%\^&*(_=+{[><]/.test(a.slice(b-
1,b+1))};var eb,Rc,ua="\n\nb".split(/\n/).length!=3?function(a){for(var b=0,c=[],d=a.length;b<=d;){var e=a.indexOf("\n",b);if(e==-1)e=a.length;var f=a.slice(b,a.charAt(e-1)=="\r"?e-1:e),g=f.indexOf("\r");if(g!=-1){c.push(f.slice(0,g));b+=g+1}else{c.push(f);b=e+1}}return c}:function(a){return a.split(/\r\n?|\n/)};q.splitLines=ua;var te=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return false}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}if(!b||
b.parentElement()!=a)return false;return b.compareEndPoints("StartToEnd",b)!=0},kd=function(){var a=v("div");if("oncopy"in a)return true;a.setAttribute("oncopy","return;");return typeof a.oncopy=="function"}(),xa={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",
127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};q.keyNames=xa;(function(){for(var a=0;a<10;a++)xa[a+48]=String(a);for(a=65;a<=90;a++)xa[a]=String.fromCharCode(a);for(a=1;a<=12;a++)xa[a+111]=xa[a+63235]="F"+a})();var Ia,He=function(){function a(h){return h<=255?b.charAt(h):1424<=h&&h<=1524?"R":1536<=h&&h<=1791?
c.charAt(h-1536):1792<=h&&h<=2220?"r":"L"}var b="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",c="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",
d=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,e=/[stwN]/,f=/[LRr]/,g=/[Lb1n]/,i=/[1n]/;return function(h){if(!d.test(h))return false;for(var j=h.length,k=[],l=0,n;l<j;++l)k.push(a(h.charCodeAt(l)));l=0;for(var m="L";l<j;++l){n=k[l];if(n=="m")k[l]=m;else m=n}l=0;for(m="L";l<j;++l){n=k[l];if(n=="1"&&m=="r")k[l]="n";else if(f.test(n)){m=n;if(n=="r")k[l]="R"}}l=1;for(m=k[0];l<j-1;++l){n=k[l];if(n=="+"&&m=="1"&&k[l+1]=="1")k[l]="1";else if(n==","&&m==k[l+1]&&(m=="1"||m=="n"))k[l]=m;m=n}for(l=0;l<j;++l){n=
k[l];if(n==",")k[l]="N";else if(n=="%"){for(m=l+1;m<j&&k[m]=="%";++m);var t=l&&k[l-1]=="!"||m<j-1&&k[m]=="1"?"1":"N";for(n=l;n<m;++n)k[n]=t;l=m-1}}l=0;for(m="L";l<j;++l){n=k[l];if(m=="L"&&n=="1")k[l]="L";else if(f.test(n))m=n}for(l=0;l<j;++l)if(e.test(k[l])){for(m=l+1;m<j&&e.test(k[m]);++m);n=(m<j-1?k[m]:"L")=="L";t=(l?k[l-1]:"L")=="L"||n?"L":"R";for(n=l;n<m;++n)k[n]=t;l=m-1}m=[];var p;for(l=0;l<j;)if(g.test(k[l])){n=l;for(++l;l<j&&g.test(k[l]);++l);m.push({from:n,to:l,level:0})}else{var w=l;t=m.length;
for(++l;l<j&&k[l]!="L";++l);for(n=w;n<l;)if(i.test(k[n])){w<n&&m.splice(t,0,{from:w,to:n,level:1});w=n;for(++n;n<l&&i.test(k[n]);++n);m.splice(t,0,{from:w,to:n,level:2});w=n}else++n;w<l&&m.splice(t,0,{from:w,to:l,level:1})}if(m[0].level==1&&(p=h.match(/^\s+/))){m[0].from=p[0].length;m.unshift({from:0,to:p[0].length,level:0})}if(S(m).level==1&&(p=h.match(/\s+$/))){S(m).to-=p[0].length;m.push({from:j-p[0].length,to:j,level:0})}m[0].level!=S(m).level&&m.push({from:j,to:j,level:m[0].level});return m}}();
q.version="3.15.0";return q}();