$(function(){var b={common:iNet.resources.common},g={view:iNet.getUrl("ita/province/load"),save:iNet.getUrl("ita/province/save"),update:iNet.getUrl("ita/province/update"),"delete":iNet.getUrl("ita/province/delete")};iNet.ns("iNet.ui","iNet.ui.ita");iNet.ui.ita.ProvinceListWidget=function(h){var i=h||{};iNet.apply(this,i);this.id=this.id||"province-widget";iNet.ui.ita.ProvinceListWidget.superclass.constructor.call(this);var f=this;h=new iNet.ui.grid.DataSource({columns:[{type:"selection",align:"center",
width:30},{property:"code",label:b.common.codeProvince,sortable:true,type:"text",validate:function(a){if(iNet.isEmpty(a))return"Code must not be empty"}},{property:"name",label:b.common.nameProvince,sortable:true,type:"text",validate:function(a){if(iNet.isEmpty(a))return"Name must not be empty"}},{label:"",type:"action",separate:"&nbsp;",align:"center",cls:"hidden-767",buttons:[{text:"Edit",icon:"icon-pencil",labelCls:"label label-info",fn:function(a){console.log(a);f.grid().edit(a[f.grid().getIdProperty()])}},
{text:"Delete",icon:"icon-trash",labelCls:"label label-important",fn:function(a){f.grid().remove(a[f.grid().getIdProperty()])}}]}]});this.grid=new iNet.ui.grid.Grid({id:"province-grid",dataSource:h,url:g.view,firstLoad:false,idProperty:"uuid",pageSize:10,convertData:function(a){var c=a||{},e=c.items||[];return e},editable:true});this.grid.on("save",function(a){var c=a||{};console.log("saved>>",c);$.postJSON(g.save,c,function(e){var d=e||{};if(CommonService.isSuccess(d))self.notifyError(b.constant.save_title,
self.getNotifyContent(b.constant.save_error,d.errors||[]));else{this.grid.insert(d);self.notifySuccess(b.constant.save_title,b.constant.save_success)}})}.createDelegate(this));this.grid.on("update",function(a){var c=a||{};console.log("updated>>",c);$.postJSON(g.update,c,function(e){var d=e||{};if(CommonService.isSuccess(d))self.notifyError(b.constant.save_title,self.getNotifyContent(b.constant.save_error,d.errors||[]));else{this.grid.update(d);this.grid.commit();self.notifySuccess(b.constant.save_title,
b.constant.save_success)}})}.createDelegate(this));this.grid.on("selectionchange",function(a,c){console.log("selectionchange>>",a,c)});$("#province-btn-add").on("click",function(){this.grid.newRecord()}.createDelegate(this));$("#employees-btn-add-office").on("click",function(){this.fireEvent("addoffice",this)}.createDelegate(this));$("#employees-btn-add-dialog").on("click",function(){this.fireEvent("adddialog",this)}.createDelegate(this))};iNet.extend(iNet.ui.ita.ProvinceListWidget,iNet.ui.Widget);
(new iNet.ui.ita.ProvinceListWidget).show()});