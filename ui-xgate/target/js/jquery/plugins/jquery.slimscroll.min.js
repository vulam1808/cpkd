(function(e){e.fn.extend({slimScroll:function(i){var a=e.extend({width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:0.4,alwaysVisible:false,disableFadeOut:false,railVisible:false,railColor:"#333",railOpacity:0.2,railDraggable:true,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:false,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},i);this.each(function(){function o(c){if(p){c=
c||window.event;var f=0;if(c.wheelDelta)f=-c.wheelDelta/120;if(c.detail)f=c.detail/3;if(c.wheelDeltaY||c.deltaY||c.axis==2){e(c.target||c.srcTarget||c.srcElement).closest("."+a.wrapperClass).is(b.parent())&&m(f,true);c.preventDefault&&!j&&c.preventDefault();if(!j)c.returnValue=false}}}function m(c,f,r){j=false;var h=c,z=b.outerHeight()-d.outerHeight();if(s){b.parent().find(".mask_top").css({display:d.position().top<=0?"none":"block"});b.parent().find(".mask_bottom").css({display:d.position().top>=
b.height()-d.height()?"none":"block"})}if(f){h=parseInt(d.css("top"))+c*parseInt(a.wheelStep)/100*d.outerHeight();h=Math.min(Math.max(h,0),z);h=c>0?Math.ceil(h):Math.floor(h);d.css({top:h+"px"})}k=parseInt(d.css("top"))/(b.outerHeight()-d.outerHeight());h=k*(b[0].scrollHeight-b.outerHeight());if(r){h=c;c=h/b[0].scrollHeight*b.outerHeight();c=Math.min(Math.max(c,0),z);d.css({top:c+"px"})}b.scrollTop(h);b.trigger("slimscrolling",~~h);u();n()}function v(){q=Math.max(b.outerHeight()/b[0].scrollHeight*
b.outerHeight(),D);d.css({height:q+"px"});var c=q==b.outerHeight()?"none":"block";d.css({display:c})}function u(){v();clearTimeout(A);if(k==~~k){j=a.allowPageScroll;if(B!=k)b.trigger("slimscroll",~~k==0?"top":"bottom")}else j=false;B=k;if(q>=b.outerHeight())j=true;else{d.stop(true,true).fadeIn("fast");a.railVisible&&l.stop(true,true).fadeIn("fast")}}function n(){a.alwaysVisible||(A=setTimeout(function(){if(!(a.disableFadeOut&&p)&&!w&&!x){d.fadeOut("slow");l.fadeOut("slow")}},1E3))}var p,w,x,A,y,q,
k,B,D=30,j=false,b=e(this),s=b.height()>=a.height;if(b.parent().hasClass(a.wrapperClass)&&e.inArray(a.barClass,b.parent().children().map(function(c,f){return e(f).attr("class")}))>=0&&e.inArray(a.railClass,b.parent().children().map(function(c,f){return e(f).attr("class")}))>=0){var g=b.scrollTop();d=b.parent().find("."+a.barClass);l=b.parent().find("."+a.railClass);v();if(e.isPlainObject(i)){if("height"in i)if(i.height=="auto"){b.parent().css("height","auto");b.css("height","auto");var C=b.parent().parent().height();
b.parent().css("height",C);b.css("height",C)}else{b.css("height",a.height);b.parent().css("height",a.height)}if("scrollTo"in i)g=parseInt(a.scrollTo);else if("scrollBy"in i)g+=parseInt(a.scrollBy);else if("destroy"in i){d.remove();l.remove();b.unwrap();return}m(g,false,true)}}else{a.width=a.width=="auto"?b.parent().width():a.width;a.height=a.height=="auto"?b.parent().height():a.height;g=b.parent();if(!b.parent().hasClass(a.wrapperClass)){g=e("<div></div>").addClass(a.wrapperClass).css({position:"relative",
overflow:"hidden",width:a.width,height:a.height});b.css({overflow:"hidden",width:a.width,height:a.height});b.wrap(g)}var l=e("<div></div>").addClass(a.railClass).css({width:a.size,height:"100%",position:"absolute",top:0,display:a.alwaysVisible&&a.railVisible?"block":"none","border-radius":a.railBorderRadius,background:a.railColor,opacity:a.railOpacity,zIndex:90}),d=e("<div></div>").addClass(a.barClass).css({background:a.color,width:a.size,position:"absolute",cursor:a.opacity?"move":"normal",top:0,
opacity:a.opacity,display:a.alwaysVisible?"block":"none","border-radius":a.borderRadius,BorderRadius:a.borderRadius,MozBorderRadius:a.borderRadius,WebkitBorderRadius:a.borderRadius,zIndex:9999});g=a.position=="right"?{right:a.distance}:{left:a.distance};l.css(g);d.css(g);b.parent().append(d);b.parent().append(l);if(s&&a.mask_top_url){g=e("<div></div>").addClass("mask_top").css({width:"100%",height:"20px",position:"absolute",top:0,left:0,display:d.position().top<=0?"none":"block",backgroundImage:"url("+
a.mask_top_url+")",backgroundRepeat:"x",zIndex:85});b.parent().append(g)}if(s&&a.mask_bottom_url){g=e("<div></div>").addClass("mask_bottom").css({width:"100%",height:"20px",position:"absolute",bottom:0,left:0,display:d.position().top>=b.height()-d.height()?"none":"block",backgroundImage:"url("+a.mask_bottom_url+")",backgroundRepeat:"x",zIndex:85});b.parent().append(g)}a.railDraggable&&d.bind("mousedown",function(c){var f=e(document);x=true;t=parseFloat(d.css("top"));pageY=c.pageY;f.bind("mousemove.slimscroll",
function(r){currTop=t+r.pageY-pageY;d.css("top",currTop);m(0,d.position().top,false)});f.bind("mouseup.slimscroll",function(){x=false;n();f.unbind(".slimscroll")});return false}).bind("selectstart.slimscroll",function(c){c.stopPropagation();c.preventDefault();return false});l.hover(function(){u()},function(){n()});d.hover(function(){w=true},function(){w=false});b.hover(function(){p=true;u();n()},function(){p=false;n()});b.bind("touchstart",function(c){if(c.originalEvent.touches.length)y=c.originalEvent.touches[0].pageY});
b.bind("touchmove",function(c){j||c.originalEvent.preventDefault();if(c.originalEvent.touches.length){m((y-c.originalEvent.touches[0].pageY)/a.touchScrollStep,true);y=c.originalEvent.touches[0].pageY}});v();if(a.start==="bottom"){d.css({top:b.outerHeight()-d.outerHeight()});m(0,true)}else if(a.start!=="top"){m(e(a.start).position().top,null,true);a.alwaysVisible||d.hide()}(function(){if(window.addEventListener){this.addEventListener("DOMMouseScroll",o,false);this.addEventListener("mousewheel",o,false);
this.addEventListener("MozMousePixelScroll",o,false)}else document.attachEvent("onmousewheel",o)})()}});return this}});e.fn.extend({slimscroll:e.fn.slimScroll})})(jQuery);