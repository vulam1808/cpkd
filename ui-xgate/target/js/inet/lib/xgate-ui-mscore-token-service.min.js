$(function(){iNet.ns("iNet.ui.admin","iNet.ui.admin.Token");iNet.ui.admin.Token=function(){this.id="mscore-token-div";var e=this,a={token:iNet.resources.xgate.admin.token,global:iNet.resources.global,errors:iNet.resources.errors,constant:iNet.resources.constant,validate:iNet.resources.validate},j={SYNC:$("#mscore-token-sync-btn")},f={sync:iNet.getUrl("mscore/firmtoken/sync"),list:iNet.getUrl("mscore/firmtoken/list"),update:iNet.getUrl("mscore/firmtoken/update")},i=function(){$.postJSON(f.sync,{},
function(b){var d=b||{};console.log(">>sync>>",d)});c.load()},k=new DataSource({columns:[{property:"firmID",label:a.token.firmID,sortable:true,disabled:true},{property:"firmName",label:a.token.firmName,sortable:true,disabled:true},{property:"name",label:a.token.name,type:"text",sortable:true},{property:"token",label:a.token.token,type:"text",sortable:true}],delay:250}),c=new iNet.ui.grid.Grid({id:"mscore-token-grid",url:f.list,params:{},convertData:function(b){var d=b||{};return d.items},dataSource:k,
stretchHeight:false,editable:true,firstLoad:false,idProperty:"uuid"});c.on("click",function(){});c.on("update",function(b,d){var g=iNet.apply(d,b)||{};g.tokenID=g.uuid;$.postJSON(f.update,g,function(l){var h=l||{};if(CommonService.isSuccess(h)){c.update(h);c.commit();e.notifySuccess(a.constant.save_title,a.constant.save_success)}else e.notifyError(a.constant.save_title,e.getNotifyContent(a.constant.save_error,h.errors||[]))},{msg:iNet.resources.ajaxLoading.processing,mask:e.getMask()})});c.on("blur",
function(b){b=="update"&&c.endEdit()});j.SYNC.on("click",function(){i()});i();iNet.ui.admin.Token.superclass.constructor.call(this)};iNet.extend(iNet.ui.admin.Token,iNet.ui.app.widget);(new iNet.ui.admin.Token).show()});