$(function(){iNet.ns("iNet.ui.xgate","iNet.ui.xgate.BfChart");iNet.ui.xgate.BfChart=function(){this.id="chart-home-div";var i={recordCount:iNet.getUrl("onegate/deptrecord/count"),recordSearch:iNet.getUrl("onegate/deptrecord/search"),avatar:iNet.getUrl("system/userprofile/photo")},f={backPage:$('[data-type="row-pagging"] [data-action="backPage"]'),nextPage:$('[data-type="row-pagging"] [data-action="nextPage"]'),menuChange:$('[data-action="menuChange"]'),search:$('[data-action="search"]')},d={table:$("#chart-record-table"),
tableKeyword:$("#chart-record-table-keyword"),rowPagging:$('#chart-record-table [data-type="row-pagging"]'),pageNumber:$("#chart-record-table [data-page-number]"),pageTotal:$("#chart-record-table [data-page-total]"),rowTemp:$('#chart-record-table [data-type="row-template"]'),tableData:$('#chart-record-table tbody[data-type="data"]')};f.menuChange.on("click",function(){var b=$(this).attr("href")||"";if(!iNet.isEmpty(b))iNet.getLayout().location.href=iNet.getUrl("xgate/page/index")+b});f.backPage.on("click",
function(){var b=CommonService.getNumber(d.pageNumber.attr("pageNumber"),0),e=CommonService.getNumber(d.pageTotal.attr("pageTotal"),0);b--;if(b<0)b=0;__loadRecord(b)});f.nextPage.on("click",function(){var b=CommonService.getNumber(d.pageNumber.attr("pageNumber"),0),e=CommonService.getNumber(d.pageTotal.attr("pageTotal"),0);b++;if(b>=e)b=e-1;__loadRecord(b)});f.search.on("click",function(){__loadRecord(0)});d.tableKeyword.on("keyup",function(b){b.which==13&&__loadRecord(0)});var j=(new Date).format("m"),
k=(new Date).format("Y");(function(b,e){$('[data-type="month"]').text(b||"");$('[data-type="year"]').text(e||"");$.postJSON(i.recordCount,{},function(h){if(CommonService.isSuccess(h)){var a=h||{},l=a.onegateProcess||0,g=(a.onegateCompleted||0)+(a.onegateRejected||0),m=a.onegateOverdue||0,c=g==0?100:100-m*100/g;c=c==100||c==0?c.toFixed(0):c.toFixed(1);$('[data-type="summary-receiver"]').text(l);$('[data-type="summary-process"]').text(g);$('[data-type="summary-percent"]').text(c);$('[data-type="expway-has-workflow"]').text(a.expwayIn||
0);$('[data-type="expway-no-workflow"]').text(a.expwayOut||0);$('[data-type="expway-overdue"]').text(a.expwayOverdue||0);$('[data-type="expway-total"]').text(a.expwayTotal||0);$('[data-type="expway-percent"]').text(a.expwayPercent||0);$('[data-type="organ-has-workflow"]').text(a.organIn||0);$('[data-type="organ-no-workflow"]').text(a.organOut||0);$('[data-type="organ-overdue"]').text(a.organOverdue||0);$('[data-type="organ-total"]').text(a.organTotal||0);$('[data-type="organ-percent"]').text(a.organPercent||
0);$('[data-type="onegate-queue"]').text(a.onegateQueue||0);$('[data-type="onegate-additional"]').text(a.onegateAdditional||0);$('[data-type="onegate-inprocess"]').text(a.onegateProcess||0);$('[data-type="onegate-completed"]').text(a.onegateCompleted||0);$('[data-type="onegate-rejected"]').text(a.onegateRejected||0);$('[data-type="onegate-refuse"]').text(a.onegateRefuse||0);$('[data-type="onegate-published"]').text(a.onegatePublished||0);$('[data-type="onegate-overdue"]').text(a.onegateOverdue||0);
$('[data-type="onegate-total"]').text(a.onegateTotal||0);$('[data-type="onegate-percent"]').text(a.onegatePercent||0)}})})(j,k);iNet.ui.xgate.BfChart.superclass.constructor.call(this)};iNet.extend(iNet.ui.xgate.BfChart,iNet.ui.app.widget);(new iNet.ui.xgate.BfChart).show()});